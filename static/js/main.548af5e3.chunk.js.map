{"version":3,"sources":["dataGenerator/tags.ts","dataGenerator/utils.ts","dataGenerator/companies.ts","dataGenerator/contacts.ts","dataGenerator/contactNotes.ts","dataGenerator/tasks.ts","dataGenerator/deals.ts","dataGenerator/dealNotes.ts","dataProvider.ts","dataGenerator/index.ts","dataGenerator/sales.ts","dataGenerator/finalize.ts","authProvider.ts","Header.tsx","Layout.tsx","contacts/Avatar.tsx","tags/colors.ts","contacts/TagsListEdit.tsx","contacts/ContactAside.tsx","companies/LogoField.tsx","misc/Status.tsx","notes/StatusSelector.tsx","notes/NewNote.tsx","notes/Note.tsx","notes/NotesIterator.tsx","contacts/ContactShow.tsx","contacts/TagsList.tsx","contacts/ContactListFilter.tsx","contacts/ContactList.tsx","contacts/ContactEdit.tsx","contacts/ContactCreate.tsx","contacts/index.tsx","companies/sectors.ts","companies/CompanyAvatar.tsx","companies/CompanyCard.tsx","companies/GridList.tsx","companies/sizes.ts","companies/CompanyListFilter.tsx","companies/CompanyList.tsx","companies/CompanyCreate.tsx","companies/CompanyAside.tsx","deals/stages.ts","companies/CompanyShow.tsx","companies/CompanyEdit.tsx","companies/index.ts","deals/DealCard.tsx","deals/DealColumn.tsx","deals/DealListContent.tsx","deals/types.ts","deals/DealCreate.tsx","deals/ContactList.tsx","deals/DealShow.tsx","deals/OnlyMineInput.tsx","deals/DealList.tsx","deals/index.ts","dashboard/DealsChart.tsx","dashboard/HotContacts.tsx","dashboard/LatestNotes.tsx","dashboard/DealsPipeline.tsx","dashboard/Dashboard.tsx","App.tsx","index.tsx"],"names":["tags","id","name","color","weightedBoolean","likelyhood","faker","random","number","randomDate","minDate","maxDate","minTs","Date","getTime","now","range","randomRange","max","ts","Math","sqrt","sectors","sizes","regex","genders","status","maxContacts","type","stages","baseDataProvider","fakerestDataProvider","db","sales","randomSales","Array","from","keys","map","first_name","firstName","last_name","lastName","email","internet","generateSales","companies","company","companyName","logo","sector","arrayElement","size","linkedIn","toLowerCase","replace","website","url","phone_number","phone","phoneNumber","address","streetAddress","zipcode","zipCode","city","stateAbbr","nb_contacts","nb_deals","sales_id","created_at","toISOString","generateCompanies","contacts","numberOfContacts","has_avatar","gender","avatar","undefined","title","fakerCompany","bsAdjective","first_seen","last_seen","charAt","toUpperCase","substr","company_id","phone_number1","phone_number2","background","lorem","sentence","acquisition","has_newsletter","arrayElements","tag","nb_notes","generateContacts","contactNotes","contact","date","contact_id","text","paragraphs","min","generateContactNotes","deals","filter","lowercaseName","words","slice","contact_ids","stage","description","amount","updated_at","start_at","add","months","index","forEach","deal","generateDeals","dealNotes","deal_id","generateDealNotes","tasks","due_date","generateTasks","sort","a","b","valueOf","note","finalize","generateData","dataProvider","Proxy","get","target","resource","params","Promise","resolve","setTimeout","localStorage","setItem","authProvider","login","username","logout","removeItem","checkError","checkAuth","getItem","reject","getPermissions","getIdentity","fullName","useStyles","makeStyles","root","flexGrow","width","height","Header","classes","match","useRouteMatch","currentPath","path","className","AppBar","position","Toolbar","variant","Box","flex","display","justifyContent","alignItems","src","alt","Typography","component","Tabs","value","Tab","label","Link","to","UserMenu","Logout","button","Layout","props","state","hasError","errorMessage","errorInfo","history","listen","setState","error","this","theme","children","ThemeProvider","createMuiTheme","CssBaseline","Container","Error","Notification","Component","withRouter","Avatar","record","colors","TagsListEdit","useState","open","setOpen","newTagName","setNewTagName","newTagColor","setNewTagColor","anchorEl","setAnchorEl","version","setVersion","disabled","setDisabled","useGetList","page","perPage","field","order","allTags","data","ids","useGetMany","enabled","length","loaded","useUpdate","update","useCreate","create","unselectedTagIds","includes","handleAddTag","handleOpenCreateDialog","mt","mb","Chip","onDelete","tagId","handleDeleteTag","style","backgroundColor","border","icon","onClick","event","currentTarget","Menu","Boolean","onClose","MenuItem","Dialog","onSubmit","preventDefault","onSuccess","v","DialogTitle","DialogContent","autoFocus","fullWidth","onChange","flexWrap","selected","handleClick","DialogActions","Button","borderRadius","margin","RoundButton","ContactAside","link","ml","minWidth","textAlign","EditButton","basePath","ShowButton","Divider","EmailField","source","TextField","DateField","options","year","month","day","ReferenceField","reference","FunctionField","render","ReferenceManyField","TasksIterator","useListContext","loading","List","task","ListItem","disableGutters","image","objectFit","sizeInPixel","medium","small","LogoField","process","getColorFromStatus","Status","bgcolor","StatusSelector","setStatus","select","clsx","marginTop","spacing","marginBottom","toolbar","marginRight","paddingTop","NewNote","showStatus","useRecordContext","useResourceContext","setText","getCurrentDate","setDate","refresh","useRefresh","notify","useNotify","identity","useGetIdentity","foreignKeyMapping","multiline","rows","setMinutes","getMinutes","getTimezoneOffset","metadata","palette","secondary","textarea","paddingLeft","paddingRight","paddingBottom","lineHeight","buttons","cancel","content","padding","paragraph","fontFamily","typography","fontSize","body1","marginLeft","visibility","flexDirection","Note","isLast","isHover","setHover","isEditing","setEditing","noteText","setNoteText","useDelete","mutationMode","handleDelete","onMouseEnter","onMouseLeave","showTime","locales","dateStyle","timeStyle","FilledInput","split","Tooltip","IconButton","NotesIterator","ContactShowContent","useShowContext","Card","CardContent","ColoredChipField","ChipField","TagsList","ReferenceArrayField","SingleFieldList","linkType","ContactListFilter","FilterLiveSearch","FilterList","FilterListItem","last_seen_gte","endOfYesterday","last_seen_lte","startOfWeek","startOfMonth","subMonths","cursor","ContactListContent","onToggleItem","selectedIds","SimpleListLoading","hasLeftAvatarOrIcon","hasSecondaryText","ListItemIcon","Checkbox","edge","checked","tabIndex","disableRipple","e","stopPropagation","ListItemAvatar","ListItemText","primary","ListItemSecondaryAction","formatDistance","useActionStyles","createButton","ContactListActions","TopToolbar","SortButton","fields","ExportButton","CreateButton","Spacer","ContactEditContent","useEditContext","save","FormWithRedirect","redirect","formProps","mr","TextInput","ReferenceInput","AutocompleteInput","optionText","BooleanInput","omit","ContactCreateContent","useCreateContext","validate","required","list","actions","aside","pagination","Pagination","rowsPerPageOptions","filterDefaultValues","show","ShowBase","edit","EditBase","CreateBase","transform","img","large","CompanyAvatar","imgProps","paper","stats","singleStat","statIcon","CompanyCard","elevation","setElevation","linkToRecord","underline","Paper","SelectField","choices","gridList","gap","grey","LoadingGridList","nbChildren","fn","key","_","LoadedGridList","GridList","CompanyListFilter","CompanyListActions","inline","CustomLayout","maxWidth","CustomDivider","CompanyAside","href","stageNames","opportunity","won","lost","delayed","stageChoices","CompanyShowContent","setValue","indicatorColor","textColor","newValue","TabPanel","other","role","hidden","ContactsIterator","RouterLink","CreateRelatedContactButton","pathname","startIcon","DealsIterator","toLocaleString","notation","currency","currencyDisplay","minimumSignificantDigits","Create","SimpleForm","SelectInput","formClassName","helperText","cardContent","cardText","DealCard","useRedirect","draggableId","String","provided","snapshot","draggableProps","dragHandleProps","ref","innerRef","opacity","isDragging","gutterBottom","borderTopLeftRadius","borderTopRightRadius","droppable","DealColumn","dealIds","align","droppableId","droppableProvided","droppableProps","isDraggingOver","placeholder","initialDeals","reduce","obj","getDealsByColumn","columns","acc","push","DealListContent","currentSort","filterValues","setDeals","useContext","DataProviderContext","useMutation","payload","useEffect","newDeals","isEqual","onDragEnd","result","destination","column","sourceDeal","destinationDeal","splice","Number","getList","columnDeals","all","previousData","sourceColumn","destinationColumn","sourceDeals","destinationDeals","pop","typeChoices","DealCreate","useDataProvider","then","oldDeal","initialValues","defaultValue","NumberInput","ul","listStyle","li","ContactList","dialog","top","DealShow","DealShowContent","format","minHeight","whiteSpace","OnlyMineInput","alwaysOn","useListFilterContext","displayedFilters","setFilters","FormControlLabel","control","Switch","newFilterValues","defaultProps","dealFilters","SearchInput","DealActions","FilterButton","filters","multiplier","DealsChart","setMonths","dealsByMonth","amountByMonth","Object","pending","indexBy","right","bottom","left","valueScale","indexScale","round","enableGridX","enableGridY","enableLabel","axisTop","tickSize","tickPadding","axisBottom","legendPosition","legendOffset","axisLeft","axisRight","abs","tickValues","markers","axis","lineStyle","strokeOpacity","textStyle","fill","legend","legendOrientation","stroke","strokeWidth","HotContacts","isInteger","contactData","contactIds","contactTotal","total","contactsLoaded","SimpleList","primaryText","secondaryText","addSuffix","leftAvatar","noteTextText","overflow","LatestNotes","contactNotesData","contactNotesIds","contactNotesLoaded","dealNotesData","dealNotesIds","dealNotesLoaded","allNotes","concat","Deal","Contact","DealsPipeline","stage_neq","unorderedIds","setIds","orderedIds","Dashboard","textTransform","App","Admin","layout","dashboard","Resource","ListGuesser","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.548af5e3.chunk.js","sourcesContent":["import { Db } from './types';\n\n// --champagne-pink: #eddcd2ff;\n// --linen: #fff1e6ff;\n// --pale-pink: #fde2e4ff;\n// --mimi-pink: #fad2e1ff;\n// --powder-blue: #c5deddff;\n// --mint-cream: #dbe7e4ff;\n// --isabelline: #f0efebff;\n// --alice-blue: #d6e2e9ff;\n// --beau-blue: #bcd4e6ff;\n// --pale-cerulean: #99c1deff;\n\nconst tags = [\n    { id: 0, name: 'football-fan', color: '#eddcd2' },\n    { id: 1, name: 'holiday-card', color: '#fff1e6' },\n    { id: 2, name: 'influencer', color: '#fde2e4' },\n    { id: 3, name: 'manager', color: '#fad2e1' },\n    { id: 4, name: 'musician', color: '#c5dedd' },\n    { id: 5, name: 'vip', color: '#dbe7e4' },\n];\n\nexport const generateTags = (db: Db) => {\n    return [...tags];\n};\n","import faker from 'faker/locale/en';\n\nexport const weightedArrayElement = (values: any[], weights: any) =>\n    faker.random.arrayElement(\n        values.reduce(\n            (acc, value, index) =>\n                acc.concat(new Array(weights[index]).fill(value)),\n            []\n        )\n    );\n\nexport const weightedBoolean = (likelyhood: number) =>\n    faker.random.number(99) < likelyhood;\n\nexport const randomDate = (minDate?: Date, maxDate?: Date) => {\n    const minTs =\n        minDate instanceof Date\n            ? minDate.getTime()\n            : Date.now() - 5 * 365 * 24 * 60 * 60 * 1000; // 5 years\n    const maxTs = maxDate instanceof Date ? maxDate.getTime() : Date.now();\n    const range = maxTs - minTs;\n    const randomRange = faker.random.number({ max: range });\n    // move it more towards today to account for traffic increase\n    const ts = Math.sqrt(randomRange / range) * range;\n    return new Date(minTs + ts);\n};\n\nexport const randomFloat = (min: number, max: number) =>\n    parseFloat(faker.random.number({ min, max, precision: 0.01 }).toFixed(2));\n","import { company, internet, address, phone, random } from 'faker/locale/en_US';\nimport { randomDate } from './utils';\n\nimport { Db } from './types';\nimport { Company } from '../types';\n\nconst sectors = [\n    'Communication Services',\n    'Consumer Discretionary',\n    'Consumer Staples',\n    'Energy',\n    'Financials',\n    'Health Care',\n    'Industrials',\n    'Information Technology',\n    'Materials',\n    'Real Estate',\n    'Utilities',\n];\n\nconst sizes = [1, 10, 50, 250, 500];\n\nconst regex = /\\W+/;\n\nexport const generateCompanies = (db: Db): Company[] => {\n    return Array.from(Array(55).keys()).map(id => {\n        const name = company.companyName();\n        return {\n            id,\n            name: name,\n            logo: `/logos/${id}.png`,\n            sector: random.arrayElement(sectors),\n            size: random.arrayElement(sizes) as 1 | 10 | 50 | 250 | 500,\n            linkedIn: `https://www.linkedin.com/company/${name\n                .toLowerCase()\n                .replace(regex, '_')}`,\n            website: internet.url(),\n            phone_number: phone.phoneNumber(),\n            address: address.streetAddress(),\n            zipcode: address.zipCode(),\n            city: address.city(),\n            stateAbbr: address.stateAbbr(),\n            nb_contacts: 0,\n            nb_deals: 0,\n            // at least 1/3rd of companies for Jane Doe\n            sales_id:\n                random.number(2) === 0 ? 0 : random.arrayElement(db.sales).id,\n            created_at: randomDate().toISOString(),\n        };\n    });\n};\n","import {\n    name,\n    internet,\n    random,\n    company as fakerCompany,\n    phone,\n    lorem,\n} from 'faker/locale/en_US';\n\nimport { randomDate, weightedBoolean } from './utils';\nimport { Db } from './types';\nimport { Contact } from '../types';\n\nconst genders = ['male', 'female'];\nconst status = ['cold', 'cold', 'cold', 'warm', 'warm', 'hot', 'in-contract'];\nconst maxContacts = {\n    1: 1,\n    10: 4,\n    50: 12,\n    250: 25,\n    500: 50,\n};\n\nexport const generateContacts = (db: Db): Contact[] => {\n    const nbAvailblePictures = 223;\n    let numberOfContacts = 0;\n\n    return Array.from(Array(500).keys()).map(id => {\n        const has_avatar =\n            weightedBoolean(25) && numberOfContacts < nbAvailblePictures;\n        const gender = random.arrayElement(genders);\n        const first_name = name.firstName(gender as any);\n        const last_name = name.lastName();\n        const email = internet.email(first_name, last_name);\n        const avatar = has_avatar\n            ? 'https://marmelab.com/posters/avatar-' +\n              (223 - numberOfContacts) +\n              '.jpeg'\n            : undefined;\n        const title = fakerCompany.bsAdjective();\n\n        if (has_avatar) {\n            numberOfContacts++;\n        }\n\n        // choose company with people left to know\n        let company;\n        do {\n            company = random.arrayElement(db.companies);\n        } while (company.nb_contacts >= maxContacts[company.size]);\n        company.nb_contacts++;\n\n        const first_seen = randomDate(\n            new Date(company.created_at)\n        ).toISOString();\n        const last_seen = first_seen;\n\n        return {\n            id,\n            first_name,\n            last_name,\n            gender,\n            title: title.charAt(0).toUpperCase() + title.substr(1),\n            company_id: company.id,\n            email,\n            phone_number1: phone.phoneNumber(),\n            phone_number2: phone.phoneNumber(),\n            background: lorem.sentence(),\n            acquisition: random.arrayElement(['inbound', 'outbound']),\n            avatar,\n            first_seen: first_seen,\n            last_seen: last_seen,\n            has_newsletter: weightedBoolean(30),\n            status: random.arrayElement(status),\n            tags: random\n                .arrayElements(db.tags, random.arrayElement([0, 0, 0, 1, 1, 2]))\n                .map(tag => tag.id), // finalize\n            sales_id: company.sales_id,\n            nb_notes: 0,\n        };\n    });\n};\n","import { random, lorem } from 'faker/locale/en_US';\n\nimport { Db } from './types';\nimport { ContactNote } from '../types';\nimport { randomDate } from './utils';\n\nconst type = ['Email', 'Call', 'Call', 'Call', 'Call', 'Meeting', 'Reminder'];\nconst status = ['cold', 'cold', 'cold', 'warm', 'warm', 'hot', 'in-contract'];\n\nexport const generateContactNotes = (db: Db): ContactNote[] => {\n    return Array.from(Array(1200).keys()).map(id => {\n        const contact = random.arrayElement(db.contacts);\n        const date = randomDate(new Date(contact.first_seen)).toISOString();\n        contact.nb_notes++;\n        contact.last_seen = date > contact.last_seen ? date : contact.last_seen;\n        return {\n            id,\n            contact_id: contact.id,\n            type: random.arrayElement(type),\n            text: lorem.paragraphs(random.number({ min: 1, max: 4 })),\n            date,\n            sales_id: contact.sales_id,\n            status: random.arrayElement(status),\n        };\n    });\n};\n","import { random, lorem } from 'faker/locale/en_US';\n\nimport { Db } from './types';\nimport { randomDate } from './utils';\n\nconst type = [\n    'Email',\n    'Email',\n    'Email',\n    'Email',\n    'Email',\n    'Email',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Call',\n    'Demo',\n    'Lunch',\n    'Meeting',\n    'Follow-up',\n    'Follow-up',\n    'Thank you',\n    'Ship',\n    'None',\n];\n\nexport const generateTasks = (db: Db) => {\n    return Array.from(Array(400).keys()).map(id => {\n        const contact = random.arrayElement(db.contacts);\n        return {\n            id,\n            contact_id: contact.id,\n            type: random.arrayElement(type),\n            text: lorem.sentence(),\n            due_date: randomDate(new Date(contact.first_seen)),\n            sales_id: contact.sales_id,\n        };\n    });\n};\n","import { random, lorem } from 'faker/locale/en_US';\nimport { add } from 'date-fns';\n\nimport { Db } from './types';\nimport { Deal } from '../types';\nimport { randomDate } from './utils';\n\nconst type = [\n    'Other',\n    'Copywriting',\n    'Print project',\n    'UI Design',\n    'Website design',\n];\nconst stages = [\n    'opportunity',\n    'proposal-sent',\n    'in-negociation',\n    'won',\n    'lost',\n    'delayed',\n];\n//const tags = [\"new deal\", \"upsell\", \"SAV\"];\n\nexport const generateDeals = (db: Db): Deal[] => {\n    const deals = Array.from(Array(50).keys()).map(id => {\n        const company = random.arrayElement(db.companies);\n        company.nb_deals++;\n        const contacts = random.arrayElements(\n            db.contacts.filter(contact => contact.company_id === company.id),\n            random.number({ min: 1, max: 3 })\n        );\n        const lowercaseName = lorem.words();\n        const created_at = randomDate(\n            new Date(company.created_at)\n        ).toISOString();\n        return {\n            id,\n            name: lowercaseName[0].toUpperCase() + lowercaseName.slice(1),\n            company_id: company.id,\n            contact_ids: contacts.map(contact => contact.id),\n            type: random.arrayElement(type),\n            stage: random.arrayElement(stages),\n            description: lorem.paragraphs(random.number({ min: 1, max: 4 })),\n            amount: random.number(1000) * 100,\n            created_at: created_at,\n            updated_at: randomDate(new Date(created_at)).toISOString(),\n            start_at: randomDate(\n                new Date(),\n                add(new Date(), { months: 6 })\n            ).toISOString(),\n            sales_id: company.sales_id,\n            index: 0,\n            nb_notes: 0,\n        };\n    });\n    // compute index based on stage\n    stages.forEach(stage => {\n        deals\n            .filter(deal => deal.stage === stage)\n            .forEach((deal, index) => {\n                deals[deal.id].index = index;\n            });\n    });\n    return deals;\n};\n","import { random, lorem } from 'faker/locale/en_US';\n\nimport { Db } from './types';\nimport { randomDate } from './utils';\n\nconst type = ['Email', 'Call', 'Call', 'Call', 'Call', 'Meeting', 'Reminder'];\n\nexport const generateDealNotes = (db: Db) => {\n    return Array.from(Array(300).keys()).map(id => {\n        const deal = random.arrayElement(db.deals);\n        deal.nb_notes++;\n        return {\n            id,\n            deal_id: deal.id,\n            type: random.arrayElement(type),\n            text: lorem.paragraphs(random.number({ min: 1, max: 4 })),\n            date: randomDate(\n                new Date(db.companies[deal.company_id as number].created_at)\n            ).toISOString(),\n            sales_id: deal.sales_id,\n        };\n    });\n};\n","import fakerestDataProvider from 'ra-data-fakerest';\n\nimport generateData from './dataGenerator';\n\nconst baseDataProvider = fakerestDataProvider(generateData(), true);\n\nexport const dataProvider = new Proxy(baseDataProvider, {\n    get: (target, name: string) => (resource: string, params: any) =>\n        new Promise(resolve =>\n            setTimeout(\n                () => resolve(baseDataProvider[name](resource, params)),\n                300\n            )\n        ),\n});\n","/* eslint-disable import/no-anonymous-default-export */\nimport { generateSales } from './sales';\nimport { generateTags } from './tags';\nimport { generateCompanies } from './companies';\nimport { generateContacts } from './contacts';\nimport { generateContactNotes } from './contactNotes';\nimport { generateTasks } from './tasks';\nimport { generateDeals } from './deals';\nimport { generateDealNotes } from './dealNotes';\nimport { finalize } from './finalize';\nimport { Db } from './types';\n\nexport default (): Db => {\n    const db = {} as Db;\n    db.sales = generateSales(db);\n    db.tags = generateTags(db);\n    db.companies = generateCompanies(db);\n    db.contacts = generateContacts(db);\n    db.contactNotes = generateContactNotes(db);\n    db.deals = generateDeals(db);\n    db.dealNotes = generateDealNotes(db);\n    db.tasks = generateTasks(db);\n    finalize(db);\n\n    return db;\n};\n","import { name, internet } from 'faker/locale/en_US';\n\nimport { Db } from './types';\n\nexport const generateSales = (db: Db) => {\n    const randomSales = Array.from(Array(10).keys()).map(id => {\n        const first_name = name.firstName();\n        const last_name = name.lastName();\n        const email = internet.email(first_name, last_name);\n\n        return {\n            id: id + 1,\n            first_name,\n            last_name,\n            email,\n        };\n    });\n    return [\n        {\n            id: 0,\n            first_name: 'Jane',\n            last_name: 'Doe',\n            email: 'janedoe@atomic.dev',\n        },\n        ...randomSales,\n    ];\n};\n","import { Db } from './types';\n\nexport const finalize = (db: Db) => {\n    // set contact status according to latest note\n    db.contactNotes\n        .sort((a, b) => new Date(a.date).valueOf() - new Date(b.date).valueOf())\n        .forEach(note => {\n            db.contacts[note.contact_id as number].status = note.status;\n        });\n};\n","import { AuthProvider } from \"react-admin\";\n\nlocalStorage.setItem(\"username\", \"Adrian Sudbury\");\n\nexport const authProvider: AuthProvider = {\n  login: ({ username }) => {\n    localStorage.setItem(\"username\", username);\n    // accept all username/password combinations\n    return Promise.resolve();\n  },\n  logout: () => {\n    localStorage.removeItem(\"username\");\n    return Promise.resolve();\n  },\n  checkError: () => Promise.resolve(),\n  checkAuth: () =>\n    localStorage.getItem(\"username\") ? Promise.resolve() : Promise.reject(),\n  getPermissions: () => Promise.reject(\"Unknown method\"),\n  getIdentity: () =>\n    Promise.resolve({\n      id: 0,\n      fullName: \"Adrian Sudbury\",\n      avatar:\n        \"https://avatars.githubusercontent.com/u/3384470?v=4\"\n        // \"data:image/jpeg;base64,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\",\n    }),\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Tabs, Tab, Toolbar, AppBar, Box, Typography } from \"@material-ui/core\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport { UserMenu, Logout } from \"react-admin\";\n\nconst useStyles = makeStyles({\n  root: {\n    flexGrow: 1,\n  },\n  logo: {\n    width: 50,\n    height: 43.54,\n  },\n});\n\nconst Header = () => {\n  const classes = useStyles();\n  const match = useRouteMatch([\"/contacts\", \"/companies\", \"/deals\"]);\n  const currentPath = match?.path ?? \"/\";\n\n  return (\n    <nav className={classes.root}>\n      <AppBar position=\"static\" color=\"primary\">\n        <Toolbar variant=\"dense\">\n          <Box flex={1} display=\"flex\" justifyContent=\"space-between\">\n            <Box display=\"flex\" alignItems=\"center\">\n              <img\n                className={classes.logo}\n                src={\n                  \"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg\"\n                }\n                alt=\"Bosch Logo\"\n              />\n              <Typography component=\"span\" variant=\"body2\">\n                React Admin CRM\n              </Typography>\n            </Box>\n            <Box>\n              <Tabs value={currentPath} aria-label=\"Navigation Tabs\">\n                <Tab label={\"Dashboard\"} component={Link} to=\"/\" value=\"/\" />\n                <Tab\n                  label={\"Contacts\"}\n                  component={Link}\n                  to=\"/contacts\"\n                  value=\"/contacts\"\n                />\n                <Tab\n                  label={\"Companies\"}\n                  component={Link}\n                  to=\"/companies\"\n                  value=\"/companies\"\n                />\n                <Tab\n                  label={\"Deals\"}\n                  component={Link}\n                  to=\"/deals\"\n                  value=\"/deals\"\n                />\n              </Tabs>\n            </Box>\n            <Box display=\"flex\">\n              <UserMenu logout={<Logout button />} />\n            </Box>\n          </Box>\n        </Toolbar>\n      </AppBar>\n    </nav>\n  );\n};\n\nexport default Header;\n","import React, { Component, ErrorInfo, HtmlHTMLAttributes } from 'react';\nimport PropTypes from 'prop-types';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CssBaseline, Container } from '@material-ui/core';\nimport { CoreLayoutProps } from 'react-admin';\n\nimport { Notification, Error } from 'react-admin';\nimport Header from './Header';\n\nclass Layout extends Component<LayoutProps, LayoutState> {\n    state: LayoutState = {\n        hasError: false,\n        errorMessage: undefined,\n        errorInfo: undefined,\n    };\n\n    constructor(props: any) {\n        super(props);\n        /**\n         * Reset the error state upon navigation\n         *\n         * @see https://stackoverflow.com/questions/48121750/browser-navigation-broken-by-use-of-react-error-boundaries\n         */\n        props.history.listen(() => {\n            if (this.state.hasError) {\n                this.setState({ hasError: false });\n            }\n        });\n    }\n\n    componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n        this.setState({\n            hasError: true,\n            errorMessage: error,\n            errorInfo,\n        });\n    }\n\n    render() {\n        const { theme, title, children } = this.props;\n        const { hasError, errorMessage, errorInfo } = this.state;\n        return (\n            // @ts-ignore\n            <ThemeProvider theme={createMuiTheme(theme)}>\n                <CssBaseline />\n                <Header />\n                <Container>\n                    <main id=\"main-content\">\n                        {hasError ? (\n                            <Error\n                                error={errorMessage as Error}\n                                errorInfo={errorInfo}\n                                title={title as string}\n                            />\n                        ) : (\n                            children\n                        )}\n                    </main>\n                </Container>\n                <Notification />\n            </ThemeProvider>\n        );\n    }\n\n    static propTypes = {\n        children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n        title: PropTypes.node.isRequired,\n    };\n}\n\nexport interface LayoutProps\n    extends CoreLayoutProps,\n        Omit<HtmlHTMLAttributes<HTMLDivElement>, 'title'>,\n        RouteComponentProps {}\n\nexport interface LayoutState {\n    hasError: boolean;\n    errorMessage?: Error;\n    errorInfo?: ErrorInfo;\n}\n\n// @ts-ignore\nexport default withRouter(Layout);\n","import * as React from 'react';\nimport { Avatar as MuiAvatar } from '@material-ui/core';\n\nimport { Contact } from '../types';\n\nexport const Avatar = ({ record }: { record: Contact }) => (\n    <MuiAvatar src={record.avatar}>\n        {record.first_name.charAt(0)}\n        {record.last_name.charAt(0)}\n    </MuiAvatar>\n);\n","export const colors = [\n    '#eddcd2',\n    '#fff1e6',\n    '#fde2e4',\n    '#fad2e1',\n    '#c5dedd',\n    '#dbe7e4',\n    '#f0efeb',\n    '#d6e2e9',\n    '#bcd4e6',\n    '#99c1de',\n];\n","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useGetMany,\n    useCreate,\n    useUpdate,\n    useGetList,\n    Identifier,\n} from 'react-admin';\nimport {\n    Chip,\n    Box,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField,\n    MenuItem,\n    Menu,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ControlPointIcon from '@material-ui/icons/ControlPoint';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport { colors } from '../tags/colors';\nimport { Contact } from '../types';\n\nexport const TagsListEdit = ({ record }: { record: Contact }) => {\n    const [open, setOpen] = useState(false);\n    const [newTagName, setNewTagName] = useState('');\n    const [newTagColor, setNewTagColor] = useState(colors[0]);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const [version, setVersion] = useState(0); // used to force the refresh of useGetList without refreshing the whole page\n    const [disabled, setDisabled] = useState(false);\n\n    const { data: allTags, ids } = useGetList(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' },\n        {},\n        { version } as any // FIXME UseDataProviderOptions don't allow [key: string]: any\n    );\n    const { data: tags, loaded } = useGetMany('tags', record.tags, {\n        enabled: record.tags && record.tags.length > 0,\n    });\n    const [update] = useUpdate();\n    const [create] = useCreate();\n\n    const unselectedTagIds = ids && ids.filter(id => !record.tags.includes(id));\n\n    const handleOpen = (event: React.MouseEvent<HTMLDivElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleDeleteTag = (id: Identifier) => {\n        const tags: Identifier[] = record.tags.filter(\n            (tagId: Identifier) => tagId !== id\n        );\n        update('contacts', record.id, { tags }, record);\n    };\n\n    const handleAddTag = (id: Identifier) => {\n        const tags: Identifier[] = [...record.tags, id];\n        update('contacts', record.id, { tags }, record);\n        setAnchorEl(null);\n    };\n\n    const handleOpenCreateDialog = () => {\n        setOpen(true);\n        setAnchorEl(null);\n        setDisabled(false);\n    };\n\n    const handleNewTagNameChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setNewTagName(event.target.value);\n    };\n\n    const handleCreateTag = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setDisabled(true);\n        create(\n            'tags',\n            { name: newTagName, color: newTagColor },\n            {\n                onSuccess: ({ data }) => {\n                    update(\n                        'contacts',\n                        record.id,\n                        { tags: [...record.tags, data.id] },\n                        record,\n                        {\n                            onSuccess: () => {\n                                setNewTagName('');\n                                setNewTagColor(colors[0]);\n                                setOpen(false);\n\n                                setVersion(v => v + 1);\n                            },\n                        }\n                    );\n                },\n            }\n        );\n    };\n\n    if (!loaded || !tags) return null;\n    return (\n        <>\n            {tags.map(tag => (\n                <Box mt={1} mb={1} key={tag.id}>\n                    <Chip\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onDelete={() => handleDeleteTag(tag.id)}\n                        label={tag.name}\n                        style={{ backgroundColor: tag.color, border: 0 }}\n                    />\n                </Box>\n            ))}\n            <Box mt={1}>\n                <Chip\n                    icon={<ControlPointIcon />}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={handleOpen}\n                    label=\"Add tag\"\n                    color=\"primary\"\n                />\n            </Box>\n            <Menu\n                open={Boolean(anchorEl)}\n                onClose={handleClose}\n                anchorEl={anchorEl}\n            >\n                {unselectedTagIds?.map(id => (\n                    <MenuItem key={id} onClick={() => handleAddTag(id)}>\n                        <Chip\n                            size=\"small\"\n                            variant=\"outlined\"\n                            label={allTags && allTags[id].name}\n                            style={{\n                                backgroundColor: allTags && allTags[id].color,\n                                border: 0,\n                            }}\n                            onClick={() => handleAddTag(id)}\n                        />\n                    </MenuItem>\n                ))}\n                <MenuItem onClick={handleOpenCreateDialog}>\n                    <Chip\n                        icon={<EditIcon />}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        onClick={handleOpenCreateDialog}\n                        color=\"primary\"\n                        label=\"Create new tag\"\n                    />\n                </MenuItem>\n            </Menu>\n            <Dialog\n                open={open}\n                onClose={() => setOpen(false)}\n                aria-labelledby=\"form-dialog-title\"\n            >\n                <form onSubmit={handleCreateTag}>\n                    <DialogTitle id=\"form-dialog-title\">\n                        Create a new tag\n                    </DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            label=\"Tag name\"\n                            fullWidth\n                            value={newTagName}\n                            onChange={handleNewTagNameChange}\n                        />\n                        <Box display=\"flex\" flexWrap=\"wrap\" width={230} mt={2}>\n                            {colors.map(color => (\n                                <RoundButton\n                                    key={color}\n                                    color={color}\n                                    selected={color === newTagColor}\n                                    handleClick={() => {\n                                        setNewTagColor(color);\n                                    }}\n                                />\n                            ))}\n                        </Box>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={() => setOpen(false)} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            disabled={disabled}\n                        >\n                            Add tag\n                        </Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </>\n    );\n};\n\nconst useStyles = makeStyles({\n    root: {\n        width: 30,\n        height: 30,\n        borderRadius: 15,\n        display: 'inline-block',\n        margin: 8,\n    },\n});\n\nconst RoundButton = ({ color, handleClick, selected }: any) => {\n    const classes = useStyles();\n    return (\n        <button\n            type=\"button\"\n            className={classes.root}\n            style={{\n                backgroundColor: color,\n                border: selected ? '2px solid grey' : 'none',\n            }}\n            onClick={handleClick}\n        />\n    );\n};\n","import * as React from 'react';\nimport {\n    TextField,\n    EmailField,\n    DateField,\n    ReferenceManyField,\n    EditButton,\n    ShowButton,\n    useListContext,\n    ReferenceField,\n    FunctionField,\n} from 'react-admin';\nimport { Box, Typography, Divider, List, ListItem } from '@material-ui/core';\nimport { TagsListEdit } from './TagsListEdit';\n\nimport { Sale } from '../types';\n\nexport const ContactAside = ({ record, link = 'edit' }: any) => (\n    <Box ml={4} width={250} minWidth={250}>\n        <Box textAlign=\"center\" mb={2}>\n            {link === 'edit' ? (\n                <EditButton\n                    basePath=\"/contacts\"\n                    record={record}\n                    label=\"Edit Contact\"\n                />\n            ) : (\n                <ShowButton\n                    basePath=\"/contacts\"\n                    record={record}\n                    label=\"Show Contact\"\n                />\n            )}\n        </Box>\n\n        <Typography variant=\"body2\">Personal info</Typography>\n        <Divider />\n\n        <Box mt={2}>\n            <EmailField source=\"email\" />\n        </Box>\n\n        <Box mt={1}>\n            <TextField source=\"phone_number1\" />{' '}\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                Work\n            </Typography>\n        </Box>\n\n        <Box mb={1}>\n            <TextField source=\"phone_number2\" />{' '}\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"span\">\n                Home\n            </Typography>\n        </Box>\n\n        <Box mb={3}>\n            <Typography variant=\"body2\">\n                {record.gender === 'male' ? 'He/Him' : 'She/Her'}\n            </Typography>\n        </Box>\n\n        <Typography variant=\"body2\">Background</Typography>\n        <Divider />\n\n        <Box mt={2}>{record && record.background}</Box>\n        <Box mt={1} mb={3}>\n            <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                Added on\n            </Typography>{' '}\n            <DateField\n                source=\"first_seen\"\n                options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                color=\"textSecondary\"\n            />\n            <br />\n            <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                Last seen on\n            </Typography>{' '}\n            <DateField\n                source=\"last_seen\"\n                options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                color=\"textSecondary\"\n            />\n            <br />\n            <Typography component=\"span\" variant=\"body2\" color=\"textSecondary\">\n                Followed by\n            </Typography>{' '}\n            <ReferenceField\n                resource=\"contacts\"\n                source=\"sales_id\"\n                reference=\"sales\"\n            >\n                <FunctionField<Sale>\n                    source=\"last_name\"\n                    render={record =>\n                        record ? `${record.first_name} ${record.last_name}` : ''\n                    }\n                />\n            </ReferenceField>\n        </Box>\n\n        <Box mb={3}>\n            <Typography variant=\"body2\">Tags</Typography>\n            <Divider />\n            <TagsListEdit record={record} />\n        </Box>\n\n        <ReferenceManyField\n            resource=\"contacts\"\n            target=\"contact_id\"\n            reference=\"tasks\"\n        >\n            <TasksIterator />\n        </ReferenceManyField>\n    </Box>\n);\n\nconst TasksIterator = () => {\n    const { data, ids, loading } = useListContext();\n    if (loading || ids.length === 0) return null;\n    return (\n        <Box>\n            <Typography variant=\"body2\">Tasks</Typography>\n            <Divider />\n\n            <List>\n                {ids.map(id => {\n                    const task = data[id];\n                    return (\n                        <ListItem key={id} disableGutters>\n                            <Box>\n                                <Typography variant=\"body2\">\n                                    {task.text}\n                                </Typography>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                >\n                                    due{' '}\n                                    <DateField\n                                        source=\"due_date\"\n                                        record={task}\n                                    />\n                                </Typography>\n                            </Box>\n                        </ListItem>\n                    );\n                })}\n            </List>\n        </Box>\n    );\n};\n","import * as React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  image: {\n    objectFit: \"contain\",\n  },\n});\n\nconst sizeInPixel = {\n  medium: 42,\n  small: 20,\n};\n\nexport const LogoField = ({\n  record,\n  source,\n  size = \"medium\",\n}: {\n  record?: { logo: string; name: string };\n  source?: string;\n  size?: \"small\" | \"medium\";\n}) => {\n  const classes = useStyles();\n  if (!record) return null;\n  return (\n    <img\n      src={process.env.PUBLIC_URL + record.logo}\n      alt={record.name}\n      title={record.name}\n      width={sizeInPixel[size]}\n      height={sizeInPixel[size]}\n      className={classes.image}\n    />\n  );\n};\n","import * as React from 'react';\nimport { Box } from '@material-ui/core';\n\nconst getColorFromStatus = (status: string) =>\n    status === 'cold'\n        ? '#7dbde8'\n        : status === 'warm'\n        ? '#e8cb7d'\n        : status === 'hot'\n        ? '#e88b7d'\n        : status === 'in-contract'\n        ? '#a4e87d'\n        : '#000';\n\nexport const Status = ({ status }: { status: string }) => (\n    <Box\n        width={10}\n        height={10}\n        display=\"inline-block\"\n        borderRadius={5}\n        bgcolor={getColorFromStatus(status)}\n        component=\"span\"\n    />\n);\n","import * as React from 'react';\nimport { TextField, MenuItem } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 150,\n    },\n});\n\nexport const StatusSelector = ({ status, setStatus, className = '' }: any) => {\n    const classes = useStyles();\n    return (\n        <TextField\n            select\n            value={status}\n            onChange={(event: React.ChangeEvent<{ value: unknown }>) => {\n                setStatus(event.target.value);\n            }}\n            variant=\"filled\"\n            label={false}\n            margin=\"none\"\n            size=\"small\"\n            className={clsx(className, classes.root)}\n        >\n            <MenuItem value=\"cold\">\n                Cold <Status status=\"cold\" />\n            </MenuItem>\n            <MenuItem value=\"warm\">\n                Warm <Status status=\"warm\" />\n            </MenuItem>\n            <MenuItem value=\"hot\">\n                Hot <Status status=\"hot\" />\n            </MenuItem>\n            <MenuItem value=\"in-contract\">\n                In Contract <Status status=\"in-contract\" />\n            </MenuItem>\n        </TextField>\n    );\n};\n","import * as React from 'react';\nimport { useState, FormEvent } from 'react';\nimport {\n    useRecordContext,\n    useCreate,\n    useUpdate,\n    useRefresh,\n    useNotify,\n    useGetIdentity,\n    Identifier,\n    useResourceContext,\n} from 'react-admin';\nimport { TextField as TextInput, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { StatusSelector } from './StatusSelector';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginTop: theme.spacing(4),\n        marginBottom: theme.spacing(1),\n    },\n    toolbar: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginTop: theme.spacing(1),\n    },\n    small: {\n        marginRight: '1em',\n        '& .MuiFilledInput-input': {\n            paddingTop: 10,\n        },\n    },\n}));\n\nexport const NewNote = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'contacts' | 'deals';\n}) => {\n    const classes = useStyles();\n    const record = useRecordContext();\n    const resource = useResourceContext();\n    const [text, setText] = useState('');\n    const [status, setStatus] = useState(record && record.status);\n    const [date, setDate] = useState(getCurrentDate());\n    const [create, { loading }] = useCreate();\n    const [update] = useUpdate();\n    // FIXME: use refetch instead when ReferenceManyField exposes it in the ListContext\n    const refresh = useRefresh();\n    const notify = useNotify();\n    const { identity } = useGetIdentity();\n    if (!record || !identity) return null;\n\n    const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        const data: any = {\n            [foreignKeyMapping[reference]]: record.id,\n            sales_id: identity.id,\n            date,\n            text,\n        };\n        if (showStatus) {\n            data.status = status;\n        }\n        update(\n            reference,\n            ((record && record.id) as unknown) as Identifier,\n            {\n                last_seen: date,\n                status,\n                nb_notes: record.nb_notes + 1,\n            },\n            record\n        );\n        create(resource, data, {\n            onSuccess: () => {\n                setText('');\n                notify('Note added successfully');\n                refresh();\n            },\n        });\n        return false;\n    };\n    return (\n        <div className={classes.root}>\n            <form onSubmit={handleSubmit}>\n                <TextInput\n                    label=\"Add a note\"\n                    variant=\"filled\"\n                    size=\"small\"\n                    fullWidth\n                    multiline\n                    value={text}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                        setText(event.target.value)\n                    }\n                    rows={3}\n                />\n                <div className={classes.toolbar}>\n                    <span>\n                        {text ? (\n                            <>\n                                {showStatus && (\n                                    <StatusSelector\n                                        status={status}\n                                        setStatus={setStatus}\n                                        className={classes.small}\n                                    />\n                                )}\n                                <TextInput\n                                    type=\"datetime-local\"\n                                    variant=\"filled\"\n                                    size=\"small\"\n                                    value={date}\n                                    onChange={(\n                                        event: React.ChangeEvent<\n                                            HTMLInputElement\n                                        >\n                                    ) => {\n                                        setDate(event.target.value);\n                                    }}\n                                    className={classes.small}\n                                />\n                            </>\n                        ) : null}\n                    </span>\n                    <Button\n                        type=\"submit\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!text || loading}\n                    >\n                        Add this note\n                    </Button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nconst getCurrentDate = () => {\n    const now = new Date();\n    now.setMinutes(now.getMinutes() - now.getTimezoneOffset());\n    return now.toISOString().slice(0, -1);\n};\n\nconst foreignKeyMapping = {\n    contacts: 'contact_id',\n    deals: 'deal_id',\n};\n","import * as React from 'react';\nimport { useState, FormEvent, ChangeEvent } from 'react';\nimport {\n    TextField,\n    ReferenceField,\n    DateField,\n    useResourceContext,\n    useDelete,\n    useUpdate,\n    useNotify,\n    useRecordContext,\n} from 'react-admin';\nimport {\n    Typography,\n    Tooltip,\n    IconButton,\n    FilledInput,\n    Button,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TrashIcon from '@material-ui/icons/Delete';\n\nimport { Status } from '../misc/Status';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(2),\n    },\n    metadata: {\n        marginBottom: theme.spacing(1),\n        color: theme.palette.text.secondary,\n    },\n    textarea: {\n        paddingTop: 16,\n        paddingLeft: 14,\n        paddingRight: 60,\n        paddingBottom: 14,\n        lineHeight: 1.3,\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginTop: theme.spacing(1),\n    },\n    cancel: {\n        marginRight: theme.spacing(1),\n    },\n    content: {\n        backgroundColor: '#edf3f0',\n        padding: '0 1em',\n        borderRadius: 10,\n        display: 'flex',\n        alignItems: 'stretch',\n        marginBottom: theme.spacing(1),\n    },\n    text: {\n        flex: 1,\n    },\n    paragraph: {\n        fontFamily: theme.typography.fontFamily,\n        fontSize: theme.typography.body1.fontSize,\n        lineHeight: 1.3,\n        marginBottom: theme.spacing(2.4),\n    },\n    toolbar: {\n        marginLeft: theme.spacing(2),\n        visibility: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-around',\n    },\n}));\n\nexport const Note = ({\n    showStatus,\n    note,\n    isLast,\n    reference,\n}: {\n    showStatus?: boolean;\n    note: any;\n    isLast: boolean;\n    reference: string;\n}) => {\n    const [isHover, setHover] = useState(false);\n    const [isEditing, setEditing] = useState(false);\n    const [noteText, setNoteText] = useState(note.text);\n    const resource = useResourceContext();\n    const record = useRecordContext();\n    const notify = useNotify();\n    const classes = useStyles();\n    const [update, { loading }] = useUpdate();\n\n    const [handleDelete] = useDelete(resource, note.id, note, {\n        mutationMode: 'undoable',\n        onSuccess: () => {\n            notify('Note deleted', undefined, undefined, true);\n            update(\n                reference,\n                record.id,\n                { nb_notes: record.nb_notes - 1 },\n                record\n            );\n        },\n    });\n\n    const handleEnterEditMode = () => {\n        setEditing(true);\n    };\n\n    const handleCancelEdit = () => {\n        setEditing(false);\n        setNoteText(note.text);\n        setHover(false);\n    };\n\n    const handleTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setNoteText(event.target.value);\n    };\n\n    const handleNoteUpdate = (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        update(resource, note.id, { text: noteText }, note, {\n            onSuccess: () => {\n                setEditing(false);\n                setNoteText(note.text);\n                setHover(false);\n            },\n        });\n    };\n\n    return (\n        <div\n            className={classes.root}\n            onMouseEnter={() => setHover(true)}\n            onMouseLeave={() => setHover(false)}\n        >\n            <div className={classes.metadata}>\n                <ReferenceField\n                    record={note}\n                    resource=\"contactNotes\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    basePath=\"/contactNotes\"\n                >\n                    <TextField source=\"first_name\" variant=\"body1\" />\n                </ReferenceField>{' '}\n                <Typography component=\"span\" variant=\"body1\">\n                    added a note on{' '}\n                </Typography>\n                <DateField\n                    source=\"date\"\n                    record={note}\n                    variant=\"body1\"\n                    showTime\n                    locales=\"en\"\n                    options={{\n                        dateStyle: 'full',\n                        timeStyle: 'short',\n                    }}\n                />{' '}\n                {showStatus && <Status status={note.status} />}\n            </div>\n            {isEditing ? (\n                <form onSubmit={handleNoteUpdate}>\n                    <FilledInput\n                        value={noteText}\n                        onChange={handleTextChange}\n                        fullWidth\n                        multiline\n                        className={classes.textarea}\n                        autoFocus\n                    />\n                    <div className={classes.buttons}>\n                        <Button\n                            className={classes.cancel}\n                            onClick={handleCancelEdit}\n                            color=\"primary\"\n                        >\n                            Cancel\n                        </Button>\n                        <Button\n                            type=\"submit\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            disabled={loading}\n                        >\n                            Update Note\n                        </Button>\n                    </div>\n                </form>\n            ) : (\n                <div className={classes.content}>\n                    <div className={classes.text}>\n                        {note.text\n                            .split('\\n')\n                            .map((paragraph: string, index: number) => (\n                                <p className={classes.paragraph} key={index}>\n                                    {paragraph}\n                                </p>\n                            ))}\n                    </div>\n                    <div\n                        className={classes.toolbar}\n                        style={{ visibility: isHover ? 'visible' : 'hidden' }}\n                    >\n                        <Tooltip title=\"Edit note\">\n                            <IconButton\n                                size=\"small\"\n                                onClick={handleEnterEditMode}\n                            >\n                                <EditIcon />\n                            </IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Delete note\">\n                            <IconButton size=\"small\" onClick={handleDelete}>\n                                <TrashIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n","import * as React from 'react';\nimport { useListContext } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Note } from './Note';\nimport { NewNote } from './NewNote';\n\nconst useStyles = makeStyles({\n    root: {\n        marginTop: '0.5em',\n    },\n});\n\nexport const NotesIterator = ({\n    showStatus,\n    reference,\n}: {\n    showStatus?: boolean;\n    reference: 'contacts' | 'deals';\n}) => {\n    const classes = useStyles();\n    const { data, ids, loaded } = useListContext();\n    if (!loaded) return null;\n    return (\n        <>\n            <NewNote showStatus={showStatus} reference={reference} />\n            <div className={classes.root}>\n                {ids.map((id, index) => (\n                    <Note\n                        note={data[id]}\n                        isLast={index === ids.length - 1}\n                        showStatus={showStatus}\n                        reference={reference}\n                        key={index}\n                    />\n                ))}\n            </div>\n        </>\n    );\n};\n","import * as React from 'react';\nimport {\n    ShowBase,\n    ShowProps,\n    TextField,\n    ReferenceField,\n    ReferenceManyField,\n    useShowContext,\n} from 'react-admin';\nimport { Box, Card, CardContent, Typography } from '@material-ui/core';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { LogoField } from '../companies/LogoField';\nimport { NotesIterator } from '../notes';\nimport { Contact } from '../types';\n\nexport const ContactShow = (props: ShowProps) => (\n    <ShowBase {...props}>\n        <ContactShowContent />\n    </ShowBase>\n);\n\nconst ContactShowContent = () => {\n    const { record, loaded } = useShowContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <Card>\n                    <CardContent>\n                        <Box display=\"flex\">\n                            <Avatar record={record} />\n                            <Box ml={2} flex=\"1\">\n                                <Typography variant=\"h5\">\n                                    {record.first_name} {record.last_name}\n                                </Typography>\n                                <Typography variant=\"body2\">\n                                    {record.title} at{' '}\n                                    <ReferenceField\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        link=\"show\"\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>\n                                </Typography>\n                            </Box>\n                            <Box>\n                                <ReferenceField\n                                    source=\"company_id\"\n                                    reference=\"companies\"\n                                    link=\"show\"\n                                >\n                                    <LogoField />\n                                </ReferenceField>\n                            </Box>\n                        </Box>\n                        <ReferenceManyField\n                            target=\"contact_id\"\n                            reference=\"contactNotes\"\n                            sort={{ field: 'date', order: 'DESC' }}\n                        >\n                            <NotesIterator showStatus reference=\"contacts\" />\n                        </ReferenceManyField>\n                    </CardContent>\n                </Card>\n            </Box>\n            <ContactAside record={record} />\n        </Box>\n    );\n};\n","import * as React from 'react';\nimport { ReferenceArrayField, SingleFieldList, ChipField } from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { Contact } from '../types';\n\nconst ColoredChipField = ({ record, ...props }: any) =>\n    record ? (\n        <ChipField\n            record={record}\n            {...props}\n            style={{ backgroundColor: record.color, border: 0 }}\n            component=\"span\"\n        />\n    ) : null;\n\nconst useStyles = makeStyles({\n    root: {\n        display: 'inline-block',\n    },\n});\n\nexport const TagsList = ({ record }: { record: Contact }) => {\n    const classes = useStyles();\n    if (!record) return null;\n    return (\n        <ReferenceArrayField\n            record={record}\n            basePath=\"/contacts\"\n            resource=\"contacts\"\n            source=\"tags\"\n            reference=\"tags\"\n            className={classes.root}\n        >\n            <SingleFieldList linkType={false} component=\"span\">\n                <ColoredChipField\n                    source=\"name\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                />\n            </SingleFieldList>\n        </ReferenceArrayField>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n    useGetList,\n} from 'react-admin';\nimport { Box, Chip } from '@material-ui/core';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport { endOfYesterday, startOfWeek, startOfMonth, subMonths } from 'date-fns';\n\nimport { Status } from '../misc/Status';\n\nexport const ContactListFilter = () => {\n    const { identity } = useGetIdentity();\n    const { data, ids } = useGetList(\n        'tags',\n        { page: 1, perPage: 10 },\n        { field: 'name', order: 'ASC' }\n    );\n    return (\n        <Box width=\"15em\" order=\"-1\" marginRight=\"1em\">\n            <FilterLiveSearch />\n            <FilterList label=\"Last seen\" icon={<AccessTimeIcon />}>\n                <FilterListItem\n                    label=\"Today\"\n                    value={{\n                        last_seen_gte: endOfYesterday().toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"This week\"\n                    value={{\n                        last_seen_gte: startOfWeek(new Date()).toISOString(),\n                        last_seen_lte: undefined,\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this week\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfWeek(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before this month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: startOfMonth(new Date()).toISOString(),\n                    }}\n                />\n                <FilterListItem\n                    label=\"Before last month\"\n                    value={{\n                        last_seen_gte: undefined,\n                        last_seen_lte: subMonths(\n                            startOfMonth(new Date()),\n                            1\n                        ).toISOString(),\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Status\" icon={<TrendingUpIcon />}>\n                <FilterListItem\n                    label={\n                        <>\n                            Cold <Status status=\"cold\" />\n                        </>\n                    }\n                    value={{\n                        status: 'cold',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Warm <Status status=\"warm\" />\n                        </>\n                    }\n                    value={{\n                        status: 'warm',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            Hot <Status status=\"hot\" />\n                        </>\n                    }\n                    value={{\n                        status: 'hot',\n                    }}\n                />\n                <FilterListItem\n                    label={\n                        <>\n                            In contract <Status status=\"in-contract\" />\n                        </>\n                    }\n                    value={{\n                        status: 'in-contract',\n                    }}\n                />\n            </FilterList>\n            <FilterList label=\"Tags\" icon={<LocalOfferIcon />}>\n                {ids &&\n                    data &&\n                    ids.map(id => (\n                        <FilterListItem\n                            key={id}\n                            label={\n                                <Chip\n                                    label={data[id]?.name}\n                                    size=\"small\"\n                                    style={{\n                                        backgroundColor: data[id]?.color,\n                                        border: 0,\n                                        cursor: 'pointer',\n                                    }}\n                                />\n                            }\n                            value={{ tags: [id] }}\n                        />\n                    ))}\n            </FilterList>\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    List as RaList,\n    ListProps,\n    SimpleListLoading,\n    ReferenceField,\n    TextField,\n    useListContext,\n    ExportButton,\n    SortButton,\n    TopToolbar,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n} from 'react-admin';\nimport {\n    List,\n    ListItem,\n    ListItemAvatar,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { formatDistance } from 'date-fns';\n\nimport { Avatar } from './Avatar';\nimport { Status } from '../misc/Status';\nimport { TagsList } from './TagsList';\nimport { ContactListFilter } from './ContactListFilter';\nimport { Contact } from '../types';\n\nconst ContactListContent = () => {\n    const { data, ids, loaded, onToggleItem, selectedIds } = useListContext<\n        Contact\n    >();\n    const now = Date.now();\n    if (loaded === false) {\n        return <SimpleListLoading hasLeftAvatarOrIcon hasSecondaryText />;\n    }\n\n    return (\n        <List>\n            {ids.map(id => {\n                const contact = data[id];\n                return (\n                    <ListItem\n                        button\n                        key={id}\n                        component={Link}\n                        to={`/contacts/${id}/show`}\n                    >\n                        <ListItemIcon>\n                            <Checkbox\n                                edge=\"start\"\n                                checked={selectedIds.includes(id)}\n                                tabIndex={-1}\n                                disableRipple\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    onToggleItem(id);\n                                }}\n                            />\n                        </ListItemIcon>\n                        <ListItemAvatar>\n                            <Avatar record={contact} />\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${contact.first_name} ${contact.last_name}`}\n                            secondary={\n                                <>\n                                    {contact.title} at{' '}\n                                    <ReferenceField\n                                        record={contact}\n                                        source=\"company_id\"\n                                        reference=\"companies\"\n                                        basePath=\"/companies\"\n                                        link={false}\n                                    >\n                                        <TextField source=\"name\" />\n                                    </ReferenceField>{' '}\n                                    {contact.nb_notes &&\n                                        `- ${contact.nb_notes} notes `}\n                                    <TagsList record={contact} />\n                                </>\n                            }\n                        />\n                        <ListItemSecondaryAction>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                last activity{' '}\n                                {formatDistance(\n                                    new Date(contact.last_seen),\n                                    now\n                                )}{' '}\n                                ago <Status status={contact.status} />\n                            </Typography>\n                        </ListItemSecondaryAction>\n                    </ListItem>\n                );\n            })}\n        </List>\n    );\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst ContactListActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <SortButton fields={['last_name', 'first_name', 'last_seen']} />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/contacts\"\n                variant=\"contained\"\n                label=\"New Contact\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n\nexport const ContactList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <RaList\n            {...props}\n            actions={<ContactListActions />}\n            aside={<ContactListFilter />}\n            perPage={25}\n            pagination={<Pagination rowsPerPageOptions={[10, 25, 50, 100]} />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            sort={{ field: 'last_seen', order: 'DESC' }}\n        >\n            <ContactListContent />\n        </RaList>\n    ) : null;\n};\n","import * as React from 'react';\nimport {\n    EditBase,\n    EditProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    useEditContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box } from '@material-ui/core';\nimport omit from 'lodash/omit';\n\nimport { Avatar } from './Avatar';\nimport { ContactAside } from './ContactAside';\nimport { Contact } from '../types';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nconst ContactEditContent = () => {\n    const { record, loaded, save } = useEditContext<Contact>();\n    if (!loaded || !record) return null;\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    record={record}\n                    redirect=\"show\"\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar record={record} />\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"first_name\" />\n                                                <Spacer />\n                                                <TextInput source=\"last_name\" />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"title\" />\n                                                <Spacer />\n                                                <ReferenceInput\n                                                    source=\"company_id\"\n                                                    reference=\"companies\"\n                                                >\n                                                    <AutocompleteInput optionText=\"name\" />\n                                                </ReferenceInput>\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"email\"\n                                                    fullWidth\n                                                />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"phone_number1\" />\n                                                <Spacer />\n                                                <TextInput source=\"phone_number2\" />\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"background\"\n                                                    multiline\n                                                    fullWidth\n                                                />\n                                                <TextInput\n                                                    source=\"avatar\"\n                                                    fullWidth\n                                                />\n                                                <BooleanInput source=\"has_newsletter\" />\n                                            </Box>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar\n                                {...omit(formProps, [\n                                    // FIXME Not super user friendly way to remove warnings\n                                    'dirtyFields',\n                                    'dirtyFieldsSinceLastSubmit',\n                                    'dirtySinceLastSubmit',\n                                    'hasSubmitErrors',\n                                    'hasValidationErrors',\n                                    'initialValues',\n                                    'modifiedSinceLastSubmit',\n                                    'submitError',\n                                    'submitErrors',\n                                    'submitFailed',\n                                    'submitSucceeded',\n                                    'submitting',\n                                    'valid',\n                                ])}\n                            />\n                        </Card>\n                    )}\n                />\n            </Box>\n            <ContactAside record={record} link=\"show\" />\n        </Box>\n    );\n};\n\nexport const ContactEdit = (props: EditProps) => (\n    <EditBase {...props}>\n        <ContactEditContent />\n    </EditBase>\n);\n","import * as React from 'react';\nimport {\n    CreateBase,\n    CreateProps,\n    TextInput,\n    ReferenceInput,\n    AutocompleteInput,\n    BooleanInput,\n    FormWithRedirect,\n    Toolbar,\n    required,\n    useCreateContext,\n} from 'react-admin';\nimport { Card, CardContent, Divider, Box, Avatar } from '@material-ui/core';\n\nimport { Contact } from '../types';\n\nconst Spacer = () => <Box width={20} component=\"span\" />;\n\nexport const ContactCreate = (props: CreateProps) => (\n    <CreateBase\n        {...props}\n        transform={(data: Contact) => ({\n            ...data,\n            last_seen: new Date(),\n            tags: [],\n        })}\n    >\n        <ContactCreateContent />\n    </CreateBase>\n);\n\nconst ContactCreateContent = () => {\n    const { save, record } = useCreateContext();\n    return (\n        <Box mt={2} display=\"flex\">\n            <Box flex=\"1\">\n                <FormWithRedirect\n                    redirect=\"show\"\n                    record={record as any}\n                    save={save}\n                    render={formProps => (\n                        <Card>\n                            <CardContent>\n                                <Box>\n                                    <Box display=\"flex\">\n                                        <Box mr={2}>\n                                            <Avatar />\n                                        </Box>\n                                        <Box flex=\"1\" mt={-1}>\n                                            <Box display=\"flex\">\n                                                <TextInput\n                                                    source=\"first_name\"\n                                                    validate={[required()]}\n                                                />\n                                                <Spacer />\n                                                <TextInput\n                                                    source=\"last_name\"\n                                                    validate={[required()]}\n                                                />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"title\" />\n                                                <Spacer />\n                                                <ReferenceInput\n                                                    source=\"company_id\"\n                                                    reference=\"companies\"\n                                                >\n                                                    <AutocompleteInput optionText=\"name\" />\n                                                </ReferenceInput>\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"email\"\n                                                    fullWidth\n                                                />\n                                            </Box>\n                                            <Box display=\"flex\">\n                                                <TextInput source=\"phone_number1\" />\n                                                <Spacer />\n                                                <TextInput source=\"phone_number2\" />\n                                            </Box>\n                                            <Divider />\n                                            <Box mt={2} width={430}>\n                                                <TextInput\n                                                    source=\"background\"\n                                                    multiline\n                                                    fullWidth\n                                                />\n                                                <TextInput\n                                                    source=\"avatar\"\n                                                    fullWidth\n                                                />\n                                                <BooleanInput source=\"has_newsletter\" />\n                                            </Box>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </CardContent>\n                            <Toolbar {...formProps} />\n                        </Card>\n                    )}\n                />\n            </Box>\n        </Box>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { ContactShow } from './ContactShow';\nimport { ContactList } from './ContactList';\nimport { ContactEdit } from './ContactEdit';\nimport { ContactCreate } from './ContactCreate';\n\nexport default {\n    list: ContactList,\n    show: ContactShow,\n    edit: ContactEdit,\n    create: ContactCreate,\n};\n","export const sectors = [\n    'Communication Services',\n    'Consumer Discretionary',\n    'Consumer Staples',\n    'Energy',\n    'Financials',\n    'Health Care',\n    'Industrials',\n    'Information Technology',\n    'Materials',\n    'Real Estate',\n    'Utilities',\n].map(sector => ({ id: sector, name: sector }));\n","import * as React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { Company } from '../types';\n\nconst useStyles = makeStyles({\n    avatar: {\n        width: 60,\n        height: 60,\n        backgroundColor: 'aliceblue',\n    },\n    img: {\n        objectFit: 'contain',\n    },\n    small: {\n        width: 20,\n        height: 20,\n    },\n    large: {\n        width: 40,\n        height: 40,\n    },\n});\n\nexport const CompanyAvatar = ({\n    record,\n    size = 'large',\n}: {\n    record?: Company;\n    size?: 'small' | 'large';\n}) => {\n    const classes = useStyles();\n    if (!record) return null;\n    return (\n        <Avatar\n            src={process.env.PUBLIC_URL + record.logo}\n            alt={record.name}\n            className={classes.avatar}\n            imgProps={{ className: clsx(classes.img, classes[size]) }}\n        />\n    );\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { Paper, Typography, Link as MuiLink } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { linkToRecord, SelectField } from \"react-admin\";\nimport { Link } from \"react-router-dom\";\n\nimport { sectors } from \"./sectors\";\nimport { CompanyAvatar } from \"./CompanyAvatar\";\nimport { Company } from \"../types\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    height: 300,\n    width: 193.5,\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    padding: \"1em\",\n  },\n  identity: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  name: {\n    textAlign: \"center\",\n    marginTop: theme.spacing(1),\n  },\n  stats: {\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    width: \"100%\",\n  },\n  singleStat: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  statIcon: {\n    marginRight: theme.spacing(1),\n  },\n}));\n\nexport const CompanyCard = ({ record }: { record: Company }) => {\n  const classes = useStyles();\n  const [elevation, setElevation] = useState(1);\n  return (\n    <MuiLink\n      component={Link}\n      to={linkToRecord(\"/companies\", record.id, \"show\")}\n      underline=\"none\"\n      onMouseEnter={() => setElevation(3)}\n      onMouseLeave={() => setElevation(1)}\n    >\n      <Paper className={classes.paper} elevation={elevation}>\n        <div className={classes.identity}>\n          <CompanyAvatar record={record} />\n          <div className={classes.name}>\n            <Typography variant=\"caption\">{record.name}</Typography>\n            <br />\n            <SelectField\n              color=\"textSecondary\"\n              source=\"sector\"\n              choices={sectors}\n              record={record}\n            />\n          </div>\n        </div>\n        <div className={classes.stats}>\n          <div className={classes.singleStat}>\n            <div>\n              <Typography variant=\"caption\" style={{ marginBottom: -8 }}>\n                {record.nb_contacts}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {record.nb_contacts > 1 ? \" contacts\" : \" contact\"}\n              </Typography>\n            </div>\n          </div>\n          <div className={classes.singleStat}>\n            <div>\n              <Typography variant=\"caption\" style={{ marginBottom: -8 }}>\n                {record.nb_deals}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                {record.nb_deals > 1 ? \" deals\" : \" deal\"}\n              </Typography>\n            </div>\n          </div>\n        </div>\n      </Paper>\n    </MuiLink>\n  );\n};\n","import * as React from 'react';\nimport { Box, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useListContext, Identifier } from 'react-admin';\n\nimport { CompanyCard } from './CompanyCard';\nimport { Company } from '../types';\n\nconst useStyles = makeStyles(theme => ({\n    gridList: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        width: 1008,\n        gap: '10px',\n    },\n    paper: {\n        height: 200,\n        width: 194,\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: theme.palette.grey[200],\n    },\n}));\n\nconst times = (nbChildren: number, fn: (key: number) => any) =>\n    Array.from({ length: nbChildren }, (_, key) => fn(key));\n\nconst LoadingGridList = () => {\n    const classes = useStyles();\n    return (\n        <Box className={classes.gridList}>\n            {times(15, key => (\n                <Paper className={classes.paper} key={key} />\n            ))}\n        </Box>\n    );\n};\n\nconst LoadedGridList = () => {\n    const { ids, data } = useListContext<Company>();\n    const classes = useStyles();\n\n    if (!ids || !data) return null;\n\n    return (\n        <Box className={classes.gridList}>\n            {ids.map((id: Identifier) => (\n                <CompanyCard key={id} record={data[id]} />\n            ))}\n        </Box>\n    );\n};\n\nexport const GridList = () => {\n    const { loaded } = useListContext();\n    return loaded ? <LoadedGridList /> : <LoadingGridList />;\n};\n","export const sizes = [\n    { id: 1, name: '1 employee' },\n    { id: 10, name: '2-9 employees' },\n    { id: 50, name: '10-49 employees' },\n    { id: 250, name: '50-249 employees' },\n    { id: 500, name: '250 or more employees' },\n];\n","/* eslint-disable import/no-anonymous-default-export */\nimport * as React from 'react';\nimport {\n    FilterList,\n    FilterLiveSearch,\n    FilterListItem,\n    useGetIdentity,\n} from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\n\nimport { sizes } from './sizes';\nimport { sectors } from './sectors';\n\nexport const CompanyListFilter = () => {\n    const { identity } = useGetIdentity();\n    return (\n        <Box width=\"15em\" order=\"-1\" marginRight=\"1em\">\n            <FilterLiveSearch />\n\n            <FilterList label=\"Size\" icon={<BusinessIcon />}>\n                {sizes.map(size => (\n                    <FilterListItem\n                        key={size.id}\n                        label={size.name}\n                        value={{ size: size.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList label=\"Sector\" icon={<LocalShippingIcon />}>\n                {sectors.map(sector => (\n                    <FilterListItem\n                        key={sector.id}\n                        label={sector.name}\n                        value={{ sector: sector.id }}\n                    />\n                ))}\n            </FilterList>\n\n            <FilterList\n                label=\"Account manager\"\n                icon={<SupervisorAccountIcon />}\n            >\n                <FilterListItem\n                    label=\"Me\"\n                    value={{\n                        sales_id: identity && identity.id,\n                    }}\n                />\n            </FilterList>\n        </Box>\n    );\n};\n","import * as React from 'react';\nimport {\n    List,\n    ListProps,\n    TopToolbar,\n    ExportButton,\n    CreateButton,\n    Pagination,\n    useGetIdentity,\n} from 'react-admin';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { GridList } from './GridList';\nimport { CompanyListFilter } from './CompanyListFilter';\n\nexport const CompanyList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <List\n            {...props}\n            actions={<CompanyListActions />}\n            aside={<CompanyListFilter />}\n            filterDefaultValues={{ sales_id: identity?.id }}\n            pagination={<Pagination rowsPerPageOptions={[15, 25, 50, 100]} />}\n            perPage={25}\n            sort={{ field: 'name', order: 'ASC' }}\n            component=\"div\"\n        >\n            <GridList />\n        </List>\n    ) : null;\n};\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst CompanyListActions = (props: any) => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <ExportButton />\n            <CreateButton\n                basePath=\"/companies\"\n                variant=\"contained\"\n                label=\"New Company\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","import * as React from 'react';\nimport {\n    Create,\n    CreateProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    required,\n} from 'react-admin';\nimport { Box, CardContent, Divider, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BusinessIcon from '@material-ui/icons/Business';\nimport clsx from 'clsx';\n\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nexport const CompanyCreate = (props: CreateProps) => {\n    const classes = useStyles();\n    return (\n        <Create {...props} actions={false}>\n            <SimpleForm component={CustomLayout} redirect=\"show\">\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Create>\n    );\n};\n\nconst CustomLayout = (props: any) => (\n    <CardContent>\n        <Box display=\"flex\">\n            <Box paddingTop={1}>\n                <Avatar>\n                    <BusinessIcon />\n                </Avatar>\n            </Box>\n            <Box ml={2} flex=\"1\" maxWidth={796}>\n                {props.children}\n            </Box>\n        </Box>\n    </CardContent>\n);\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","import * as React from 'react';\nimport {\n    TextField,\n    DateField,\n    FunctionField,\n    ReferenceField,\n    EditButton,\n    ShowButton,\n} from 'react-admin';\nimport { Box, Typography, Divider, Link } from '@material-ui/core';\n\nimport { Company, Sale } from '../types';\n\nexport const CompanyAside = ({\n    record,\n    link = 'edit',\n}: {\n    record?: Company;\n    link?: string;\n}) =>\n    record ? (\n        <Box ml={4} width={250} minWidth={250}>\n            <Box textAlign=\"center\" mb={2}>\n                {link === 'edit' ? (\n                    <EditButton\n                        basePath=\"/companies\"\n                        record={record}\n                        label=\"Edit Company\"\n                    />\n                ) : (\n                    <ShowButton\n                        basePath=\"/companies\"\n                        record={record}\n                        label=\"Show Company\"\n                    />\n                )}\n            </Box>\n\n            <Typography variant=\"body2\">Company info</Typography>\n            <Divider />\n\n            <Box mt={2}>\n                Website: <Link href={record.website}>{record.website}</Link>\n                <br />\n                LinkedIn: <Link href={record.linkedIn}>LinkedIn</Link>\n            </Box>\n\n            <Box mt={1}>\n                <TextField source=\"phone_number\" record={record} />{' '}\n                <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    component=\"span\"\n                >\n                    Main\n                </Typography>\n            </Box>\n\n            <Box mt={1} mb={3}>\n                <TextField source=\"address\" />\n                <br />\n                <TextField source=\"city\" /> <TextField source=\"zipcode\" />{' '}\n                <TextField source=\"stateAbbr\" />\n            </Box>\n\n            <Typography variant=\"body2\">Background</Typography>\n            <Divider />\n\n            <Box mt={1}>\n                <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    component=\"span\"\n                >\n                    Added on\n                </Typography>{' '}\n                <DateField\n                    source=\"created_at\"\n                    options={{ year: 'numeric', month: 'long', day: 'numeric' }}\n                    color=\"textSecondary\"\n                />\n                <br />\n                <Typography\n                    component=\"span\"\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                >\n                    Followed by\n                </Typography>{' '}\n                <ReferenceField\n                    resource=\"companies\"\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                >\n                    <FunctionField<Sale>\n                        source=\"last_name\"\n                        render={record =>\n                            record\n                                ? `${record.first_name} ${record.last_name}`\n                                : ''\n                        }\n                    />\n                </ReferenceField>\n            </Box>\n        </Box>\n    ) : null;\n","export const stages = [\n  \"opportunity\",\n  \"proposal-sent\",\n  \"in-negociation\",\n  \"won\",\n  \"lost\",\n  \"delayed\",\n];\n\nexport const stageNames = {\n  opportunity: \"Opportunity\",\n  \"proposal-sent\": \"Proposed\",\n  \"in-negociation\": \"In Negoiation\",\n  won: \"Won\",\n  lost: \"Lost\",\n  delayed: \"Delayed\",\n};\n\nexport const stageChoices = stages.map((type) => ({\n  id: type,\n  /* @ts-ignore */\n  name: stageNames[type],\n}));\n","import * as React from \"react\";\nimport { useState, ChangeEvent } from \"react\";\nimport {\n  ShowBase,\n  ShowProps,\n  TextField,\n  ReferenceManyField,\n  SelectField,\n  useShowContext,\n  useRecordContext,\n  useListContext,\n} from \"react-admin\";\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  ListItemSecondaryAction,\n  Tabs,\n  Tab,\n  Divider,\n} from \"@material-ui/core\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { formatDistance } from \"date-fns\";\n\nimport { Avatar } from \"../contacts/Avatar\";\nimport { Status } from \"../misc/Status\";\nimport { TagsList } from \"../contacts/TagsList\";\nimport { sizes } from \"./sizes\";\nimport { LogoField } from \"./LogoField\";\nimport { CompanyAside } from \"./CompanyAside\";\nimport { Company, Deal, Contact } from \"../types\";\nimport { stageNames } from \"../deals/stages\";\n\nexport const CompanyShow = (props: ShowProps) => (\n  <ShowBase {...props}>\n    <CompanyShowContent />\n  </ShowBase>\n);\n\nconst CompanyShowContent = () => {\n  const { record, loaded } = useShowContext<Company>();\n  const [value, setValue] = useState(0);\n  const handleChange = (event: ChangeEvent<{}>, newValue: number) => {\n    setValue(newValue);\n  };\n  if (!loaded || !record) return null;\n  return (\n    <Box mt={2} display=\"flex\">\n      <Box flex=\"1\">\n        <Card>\n          <CardContent>\n            <Box display=\"flex\" mb={1}>\n              <LogoField record={record as any} />\n              <Box ml={2} flex=\"1\">\n                <Typography variant=\"body2\">{record.name}</Typography>\n                <Typography variant=\"caption\">\n                  <TextField source=\"sector\" />,{\" \"}\n                  <SelectField source=\"size\" choices={sizes} />\n                </Typography>\n              </Box>\n            </Box>\n            <Tabs\n              value={value}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n              onChange={handleChange}\n            >\n              {record.nb_contacts && (\n                <Tab\n                  label={\n                    record.nb_contacts === 1\n                      ? \"1 Contact\"\n                      : `${record.nb_contacts} Contacts`\n                  }\n                />\n              )}\n              {record.nb_deals && (\n                <Tab\n                  label={\n                    record.nb_deals === 1\n                      ? \"1 deal\"\n                      : `${record.nb_deals} Deals`\n                  }\n                />\n              )}\n            </Tabs>\n            <Divider />\n            <TabPanel value={value} index={0}>\n              <ReferenceManyField\n                reference=\"contacts\"\n                target=\"company_id\"\n                sort={{ field: \"last_name\", order: \"ASC\" }}\n              >\n                <ContactsIterator />\n              </ReferenceManyField>\n            </TabPanel>\n            <TabPanel value={value} index={1}>\n              <ReferenceManyField\n                reference=\"deals\"\n                target=\"company_id\"\n                sort={{ field: \"name\", order: \"ASC\" }}\n              >\n                <DealsIterator />\n              </ReferenceManyField>\n            </TabPanel>\n          </CardContent>\n        </Card>\n      </Box>\n      <CompanyAside record={record} />\n    </Box>\n  );\n};\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: any;\n  value: any;\n}\n\nconst TabPanel = (props: TabPanelProps) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`wrapped-tabpanel-${index}`}\n      aria-labelledby={`wrapped-tab-${index}`}\n      {...other}\n    >\n      {children}\n    </div>\n  );\n};\n\nconst ContactsIterator = () => {\n  const { data, ids, loaded } = useListContext<Contact>();\n  const record = useRecordContext();\n\n  const now = Date.now();\n  if (!loaded) return null;\n  return (\n    <Box>\n      <List>\n        {ids.map((id) => {\n          const contact = data[id];\n          return (\n            <ListItem\n              button\n              key={id}\n              component={RouterLink}\n              to={`/contacts/${id}/show`}\n            >\n              <ListItemAvatar>\n                <Avatar record={contact} />\n              </ListItemAvatar>\n              <ListItemText\n                primary={`${contact.first_name} ${contact.last_name}`}\n                secondary={\n                  <>\n                    {contact.title} <TagsList record={contact} />\n                  </>\n                }\n              />\n              <ListItemSecondaryAction>\n                <Typography\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  component=\"span\"\n                >\n                  last activity{\" \"}\n                  {formatDistance(new Date(contact.last_seen), now)} ago{\" \"}\n                  <Status status={contact.status} />\n                </Typography>\n              </ListItemSecondaryAction>\n            </ListItem>\n          );\n        })}\n      </List>\n      <Box textAlign=\"center\" mt={1}>\n        <CreateRelatedContactButton record={record} />\n      </Box>\n    </Box>\n  );\n};\n\nconst CreateRelatedContactButton = ({ record }: any) => (\n  <Button\n    component={RouterLink}\n    to={{\n      pathname: \"/contacts/create\",\n      state: { record: { company_id: record.id } },\n    }}\n    color=\"primary\"\n    variant=\"contained\"\n    size=\"small\"\n    startIcon={<PersonAddIcon />}\n  >\n    Add contact\n  </Button>\n);\n\nconst DealsIterator = () => {\n  const { data, ids, loaded } = useListContext<Deal>();\n\n  const now = Date.now();\n  if (!loaded) return null;\n  return (\n    <Box>\n      <List>\n        {ids.map((id) => {\n          const deal = data[id];\n          return (\n            <ListItem\n              button\n              key={id}\n              component={RouterLink}\n              to={`/deals/${id}/show`}\n            >\n              <ListItemText\n                primary={deal.name}\n                secondary={\n                  <>\n                    {/* @ts-ignore */}\n                    {stageNames[deal.stage]},{\" \"}\n                    {deal.amount.toLocaleString(\"en-US\", {\n                      notation: \"compact\",\n                      style: \"currency\",\n                      currency: \"USD\",\n                      currencyDisplay: \"narrowSymbol\",\n                      minimumSignificantDigits: 3,\n                    })}\n                    , {deal.type}\n                  </>\n                }\n              />\n              <ListItemSecondaryAction>\n                <Typography\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  component=\"span\"\n                >\n                  last activity {formatDistance(new Date(deal.updated_at), now)}{\" \"}\n                  ago{\" \"}\n                </Typography>\n              </ListItemSecondaryAction>\n            </ListItem>\n          );\n        })}\n      </List>\n    </Box>\n  );\n};\n","import * as React from 'react';\nimport {\n    Edit,\n    EditProps,\n    ReferenceInput,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    useRecordContext,\n    required,\n} from 'react-admin';\nimport { Box, CardContent, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nimport { CompanyAside } from './CompanyAside';\nimport { LogoField } from './LogoField';\nimport { sectors } from './sectors';\nimport { sizes } from './sizes';\n\nconst useStyles = makeStyles({\n    inline: {\n        display: 'inline-block',\n        marginLeft: '1em',\n        '&.first-child': {\n            marginLeft: 0,\n        },\n    },\n});\n\nexport const CompanyEdit = (props: EditProps) => {\n    const classes = useStyles();\n    return (\n        <Edit {...props} aside={<CompanyAside link=\"show\" />} actions={false}>\n            <SimpleForm component={CustomLayout} redirect=\"show\">\n                <TextInput source=\"name\" validate={required()} fullWidth />\n                <SelectInput\n                    source=\"sector\"\n                    choices={sectors}\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <SelectInput\n                    source=\"size\"\n                    choices={sizes}\n                    formClassName={classes.inline}\n                />\n                <CustomDivider />\n                <TextInput source=\"address\" fullWidth helperText={false} />\n                <TextInput\n                    source=\"city\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                />\n                <TextInput source=\"zipcode\" formClassName={classes.inline} />\n                <TextInput source=\"stateAbbr\" formClassName={classes.inline} />\n                <CustomDivider />\n                <TextInput source=\"website\" fullWidth helperText={false} />\n                <TextInput source=\"linkedIn\" fullWidth helperText={false} />\n                <TextInput source=\"logo\" fullWidth />\n                <CustomDivider />\n                <TextInput\n                    source=\"phone_number\"\n                    formClassName={clsx(classes.inline, 'first-child')}\n                    helperText={false}\n                />\n                <ReferenceInput\n                    source=\"sales_id\"\n                    reference=\"sales\"\n                    label=\"Account manager\"\n                    formClassName={classes.inline}\n                    helperText={false}\n                >\n                    <SelectInput\n                        optionText={(sales: any) =>\n                            `${sales.first_name} ${sales.last_name}`\n                        }\n                    />\n                </ReferenceInput>\n            </SimpleForm>\n        </Edit>\n    );\n};\n\nconst CustomLayout = (props: any) => {\n    const record = useRecordContext(props);\n    return (\n        <CardContent>\n            <Box display=\"flex\">\n                <LogoField record={record as any} />\n                <Box ml={2} flex=\"1\" maxWidth={796}>\n                    {props.children}\n                </Box>\n            </Box>\n        </CardContent>\n    );\n};\n\nconst CustomDivider = () => (\n    <Box mb={2}>\n        <Divider />\n    </Box>\n);\n","/* eslint-disable import/no-anonymous-default-export */\nimport { CompanyList } from './CompanyList';\nimport { CompanyCreate } from './CompanyCreate';\nimport { CompanyShow } from './CompanyShow';\nimport { CompanyEdit } from './CompanyEdit';\n\nexport default {\n    list: CompanyList,\n    create: CompanyCreate,\n    edit: CompanyEdit,\n    show: CompanyShow,\n};\n","import * as React from \"react\";\nimport { ReferenceField, useRedirect } from \"react-admin\";\nimport { Card, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { LogoField } from \"../companies/LogoField\";\nimport { Deal } from \"../types\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(1),\n  },\n  cardContent: {\n    padding: theme.spacing(1),\n    display: \"flex\",\n  },\n  cardText: {\n    marginLeft: theme.spacing(1),\n  },\n}));\n\nexport const DealCard = ({ deal, index }: { deal: Deal; index: number }) => {\n  const classes = useStyles();\n  const redirect = useRedirect();\n  if (!deal) return null;\n\n  const handleClick = () => {\n    redirect(`/deals/${deal.id}/show`);\n  };\n  return (\n    <Draggable draggableId={String(deal.id)} index={index}>\n      {(provided, snapshot) => (\n        <div\n          className={classes.root}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          ref={provided.innerRef}\n          onClick={handleClick}\n        >\n          <Card\n            style={{\n              opacity: snapshot.isDragging ? 0.9 : 1,\n              transform: snapshot.isDragging ? \"rotate(-2deg)\" : \"\",\n            }}\n            elevation={snapshot.isDragging ? 3 : 1}\n          >\n            <div className={classes.cardContent}>\n              <ReferenceField\n                source=\"company_id\"\n                record={deal}\n                reference=\"companies\"\n                resource=\"deals\"\n                basePath=\"/deals\"\n              >\n                <LogoField size=\"small\" />\n              </ReferenceField>\n              <div className={classes.cardText}>\n                <Typography variant=\"caption\" gutterBottom>\n                  {deal.name}\n                </Typography>\n                <br />\n                <Typography variant=\"caption\" color=\"textSecondary\">\n                  {deal.amount.toLocaleString(\"en-US\", {\n                    notation: \"compact\",\n                    style: \"currency\",\n                    currency: \"USD\",\n                    currencyDisplay: \"narrowSymbol\",\n                    minimumSignificantDigits: 3,\n                  })}\n                  <br />\n                  {deal.type}\n                </Typography>\n              </div>\n            </div>\n          </Card>\n        </div>\n      )}\n    </Draggable>\n  );\n};\n","import * as React from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Droppable } from \"react-beautiful-dnd\";\nimport { Identifier, RecordMap } from \"react-admin\";\n\nimport { DealCard } from \"./DealCard\";\nimport { stageNames } from \"./stages\";\nimport { Deal } from \"../types\";\n\nconst useStyles = makeStyles({\n  root: {\n    flex: 1,\n    paddingTop: 8,\n    paddingBottom: 16,\n    backgroundColor: \"#eaeaee\",\n    \"&:first-child\": {\n      paddingLeft: 5,\n      borderTopLeftRadius: 5,\n    },\n    \"&:last-child\": {\n      paddingRight: 5,\n      borderTopRightRadius: 5,\n    },\n  },\n  droppable: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    borderRadius: 5,\n    padding: 5,\n    \"&.isDraggingOver\": {\n      backgroundColor: \"#dadadf\",\n    },\n  },\n});\n\nexport const DealColumn = ({\n  stage,\n  dealIds,\n  data,\n}: {\n  stage: string;\n  dealIds: Identifier[];\n  data: RecordMap<Deal>;\n}) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Typography align=\"center\" variant=\"body2\">\n        {/* @ts-ignore */}\n        {stageNames[stage]}\n      </Typography>\n      <Droppable droppableId={stage}>\n        {(droppableProvided, snapshot) => (\n          <div\n            ref={droppableProvided.innerRef}\n            {...droppableProvided.droppableProps}\n            className={\n              classes.droppable +\n              (snapshot.isDraggingOver ? \" isDraggingOver\" : \"\")\n            }\n          >\n            {dealIds.map((id, index) => (\n              <DealCard key={id} index={index} deal={data[id]} />\n            ))}\n            {droppableProvided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport {\n    useMutation,\n    Identifier,\n    useListContext,\n    RecordMap,\n    DataProviderContext,\n} from 'react-admin';\nimport { Box } from '@material-ui/core';\nimport { DragDropContext, OnDragEndResponder } from 'react-beautiful-dnd';\nimport isEqual from 'lodash/isEqual';\n\nimport { DealColumn } from './DealColumn';\nimport { stages } from './stages';\nimport { Deal } from '../types';\n\ninterface DealsByColumn {\n    [stage: string]: Identifier[];\n}\n\nconst initialDeals: DealsByColumn = stages.reduce(\n    (obj, stage) => ({ ...obj, [stage]: [] }),\n    {}\n);\n\nconst getDealsByColumn = (\n    ids: Identifier[],\n    data: RecordMap<Deal>\n): DealsByColumn => {\n    // group deals by column\n    const columns = ids.reduce(\n        (acc, id) => {\n            acc[data[id].stage].push(id);\n            return acc;\n        },\n        stages.reduce((obj, stage) => ({ ...obj, [stage]: [] }), {} as any)\n    );\n    // order each column by index\n    stages.forEach(stage => {\n        columns[stage] = columns[stage].sort(\n            (a: Identifier, b: Identifier) => data[a].index - data[b].index\n        );\n    });\n    return columns;\n};\n\nexport const DealListContent = () => {\n    const {\n        data,\n        ids,\n        loaded,\n        page,\n        perPage,\n        currentSort,\n        filterValues,\n    } = useListContext<Deal>();\n\n    const [deals, setDeals] = useState<DealsByColumn>(\n        loaded ? getDealsByColumn(ids, data) : initialDeals\n    );\n    // we use the raw dataProvider to avoid too many updates to the Redux store after updates (which would create junk)\n    const dataProvider = useContext(DataProviderContext);\n\n    // FIXME: use refetch when available\n    const [refresh] = useMutation({\n        resource: 'deals',\n        type: 'getList',\n        payload: {\n            pagination: { page, perPage },\n            sort: currentSort,\n            filter: filterValues,\n        },\n    });\n\n    // update deals by columns when the dataProvider response updates\n    useEffect(() => {\n        if (!loaded) return;\n        const newDeals = getDealsByColumn(ids, data);\n        if (isEqual(deals, newDeals)) {\n            return;\n        }\n        setDeals(newDeals);\n    }, [data, ids, loaded]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    if (!loaded) return null;\n\n    const onDragEnd: OnDragEndResponder = async result => {\n        const { destination, source, draggableId } = result;\n\n        if (!destination) {\n            return;\n        }\n\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return;\n        }\n\n        if (source.droppableId === destination.droppableId) {\n            // moving deal inside the same column\n\n            const column = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const sourceDeal = data[column[source.index]];\n            const destinationDeal = data[column[destination.index]];\n\n            // update local state\n            // remove source deal from column\n            column.splice(source.index, 1);\n            // read source deal at destination\n            column.splice(destination.index, 0, Number(draggableId));\n            setDeals({\n                ...deals,\n                [source.droppableId]: column,\n            });\n\n            // update backend\n            // Fetch all the deals in this stage (because the list may be filtered, but we need to update even non-filtered deals)\n            const { data: columnDeals } = await dataProvider.getList('deals', {\n                sort: { field: 'index', order: 'ASC' },\n                pagination: { page: 1, perPage: 100 },\n                filter: { stage: source.droppableId },\n            });\n\n            if (source.index > destination.index) {\n                // deal moved up, eg\n                // dest   src\n                //  <------\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between destination.index and source.index, increase the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index >= destinationDeal.index &&\n                                deal.index < sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index + 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            } else {\n                // deal moved down, e.g\n                // src   dest\n                //  ------>\n                // [4, 7, 23, 5]\n\n                await Promise.all([\n                    // for all deals between source.index and destination.index, decrease the index\n                    ...columnDeals\n                        .filter(\n                            deal =>\n                                deal.index <= destinationDeal.index &&\n                                deal.index > sourceDeal.index\n                        )\n                        .map(deal =>\n                            dataProvider.update('deals', {\n                                id: deal.id,\n                                data: { index: deal.index - 1 },\n                                previousData: deal,\n                            })\n                        ),\n                    // for the deal that was moved, update its index\n                    dataProvider.update('deals', {\n                        id: sourceDeal.id,\n                        data: { index: destinationDeal.index },\n                        previousData: sourceDeal,\n                    }),\n                ]);\n\n                refresh();\n            }\n        } else {\n            // moving deal across columns\n\n            const sourceColumn = Array.from(deals[source.droppableId]); // [4, 7, 23, 5] array of ids\n            const destinationColumn = Array.from(\n                deals[destination.droppableId]\n            ); // [4, 7, 23, 5] arrays of ids\n            const sourceDeal = data[sourceColumn[source.index]];\n            const destinationDeal = data[destinationColumn[destination.index]]; // may be undefined if dropping at the end of a column\n\n            // update local state\n            sourceColumn.splice(source.index, 1);\n            destinationColumn.splice(destination.index, 0, draggableId);\n            setDeals({\n                ...deals,\n                [source.droppableId]: sourceColumn,\n                [destination.droppableId]: destinationColumn,\n            });\n\n            // update backend\n            // Fetch all the deals in both stages (because the list may be filtered, but we need to update even non-filtered deals)\n            const [\n                { data: sourceDeals },\n                { data: destinationDeals },\n            ] = await Promise.all([\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: source.droppableId },\n                }),\n                dataProvider.getList('deals', {\n                    sort: { field: 'index', order: 'ASC' },\n                    pagination: { page: 1, perPage: 100 },\n                    filter: { stage: destination.droppableId },\n                }),\n            ]);\n\n            await Promise.all([\n                // decrease index on the deals after the source index in the source columns\n                ...sourceDeals\n                    .filter(deal => deal.index > sourceDeal.index)\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index - 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // increase index on the deals after the destination index in the destination columns\n                ...destinationDeals\n                    .filter(deal =>\n                        destinationDeal\n                            ? deal.index >= destinationDeal.index\n                            : false\n                    )\n                    .map(deal =>\n                        dataProvider.update('deals', {\n                            id: deal.id,\n                            data: { index: deal.index + 1 },\n                            previousData: deal,\n                        })\n                    ),\n                // change the dragged deal to take the destination index and column\n                dataProvider.update('deals', {\n                    id: sourceDeal.id,\n                    data: {\n                        index: destinationDeal\n                            ? destinationDeal.index\n                            : destinationDeals.pop()!.index + 1,\n                        stage: destination.droppableId,\n                    },\n                    previousData: sourceDeal,\n                }),\n            ]);\n\n            refresh();\n        }\n    };\n\n    return (\n        <DragDropContext onDragEnd={onDragEnd}>\n            <Box display=\"flex\">\n                {stages.map(stage => (\n                    <DealColumn\n                        stage={stage}\n                        dealIds={deals[stage]}\n                        data={data}\n                        key={stage}\n                    />\n                ))}\n            </Box>\n        </DragDropContext>\n    );\n};\n","export const types = [\n    'Other',\n    'Copywriting',\n    'Print project',\n    'UI Design',\n    'Website design',\n];\n\nexport const typeChoices = types.map(type => ({ id: type, name: type }));\n","import * as React from 'react';\nimport {\n    Create,\n    SimpleForm,\n    TextInput,\n    SelectInput,\n    NumberInput,\n    ReferenceInput,\n    AutocompleteInput,\n    required,\n    useRedirect,\n    useDataProvider,\n} from 'react-admin';\nimport { Dialog } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { stageChoices } from './stages';\nimport { typeChoices } from './types';\nimport { Deal } from '../types';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 500,\n    },\n});\n\nexport const DealCreate = ({ open }: { open: boolean }) => {\n    const classes = useStyles();\n    const redirect = useRedirect();\n    const dataProvider = useDataProvider();\n\n    const handleClose = () => {\n        redirect('/deals');\n    };\n\n    const onSuccess = ({ data: deal }: { data: Deal }) => {\n        redirect('/deals');\n        // increase the index of all deals in the same stage as the new deal\n        dataProvider\n            .getList('deals', {\n                pagination: { page: 1, perPage: 50 },\n                sort: { field: 'id', order: 'ASC' },\n                filter: { stage: deal.stage },\n            })\n            .then(({ data: deals }) =>\n                Promise.all(\n                    deals\n                        .filter(oldDeal => oldDeal.id !== deal.id)\n                        .map(oldDeal =>\n                            dataProvider.update('deals', {\n                                id: oldDeal.id,\n                                data: { index: oldDeal.index + 1 },\n                                previousData: oldDeal,\n                            })\n                        )\n                )\n            );\n    };\n\n    return (\n        <Dialog open={open} onClose={handleClose}>\n            <Create\n                resource=\"deals\"\n                basePath=\"/deals\"\n                className={classes.root}\n                onSuccess={onSuccess}\n            >\n                <SimpleForm initialValues={{ index: 0 }}>\n                    <TextInput\n                        source=\"name\"\n                        label=\"Deal name\"\n                        fullWidth\n                        validate={[required()]}\n                    />\n                    <TextInput\n                        source=\"description\"\n                        multiline\n                        rows={3}\n                        fullWidth\n                    />\n                    <ReferenceInput\n                        source=\"company_id\"\n                        reference=\"companies\"\n                        fullWidth\n                        validate={[required()]}\n                    >\n                        <AutocompleteInput optionText=\"name\" />\n                    </ReferenceInput>\n                    <SelectInput\n                        source=\"stage\"\n                        choices={stageChoices}\n                        fullWidth\n                        validate={[required()]}\n                        defaultValue=\"opportunity\"\n                    />\n                    <SelectInput\n                        source=\"type\"\n                        choices={typeChoices}\n                        fullWidth\n                    />\n                    <NumberInput source=\"amount\" fullWidth defaultValue={0} />\n                </SimpleForm>\n            </Create>\n        </Dialog>\n    );\n};\n","import * as React from \"react\";\nimport { useListContext } from \"react-admin\";\nimport { Link } from \"@material-ui/core\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  ul: {\n    listStyle: \"none\",\n    padding: 0,\n    margin: 0,\n    display: \"inline-block\",\n  },\n  li: {\n    display: \"inline\",\n    \"&:after\": {\n      content: '\", \"',\n    },\n    \"&:last-child:after\": {\n      content: '\"\"',\n    },\n  },\n});\n\nexport const ContactList = () => {\n  const { ids, data, loaded } = useListContext();\n  const classes = useStyles();\n  if (!loaded) return <div style={{ height: \"2em\" }} />;\n  return (\n    <ul className={classes.ul}>\n      {ids.map((id) => (\n        <li key={id} className={classes.li}>\n          <Link component={RouterLink} to={`/contacts/${id}`} variant=\"body2\">\n            {data[id].first_name} {data[id].last_name}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n};\n","import * as React from \"react\";\nimport {\n  ShowBase,\n  TextField,\n  ReferenceField,\n  ReferenceManyField,\n  ReferenceArrayField,\n  useRecordContext,\n  useRedirect,\n  Identifier,\n} from \"react-admin\";\nimport {\n  Box,\n  Dialog,\n  DialogContent,\n  Typography,\n  Divider,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { format } from \"date-fns\";\n\nimport { CompanyAvatar } from \"../companies/CompanyAvatar\";\nimport { NotesIterator } from \"../notes\";\nimport { ContactList } from \"./ContactList\";\nimport { stageNames } from \"./stages\";\n\nconst useStyles = makeStyles({\n  dialog: {\n    position: \"absolute\",\n    top: 50,\n  },\n});\n\nexport const DealShow = ({ open, id }: { open: boolean; id: Identifier }) => {\n  const redirect = useRedirect();\n  const classes = useStyles();\n\n  const handleClose = () => {\n    redirect(\"/deals\");\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      fullWidth\n      maxWidth=\"md\"\n      classes={{ paper: classes.dialog }}\n    >\n      <DialogContent>\n        <ShowBase resource=\"deals\" basePath=\"/deals\" id={id}>\n          <DealShowContent />\n        </ShowBase>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst DealShowContent = () => {\n  const record = useRecordContext();\n  if (!record) return null;\n  return (\n    <>\n      <Box display=\"flex\">\n        <Box\n          width={100}\n          display=\"flex\"\n          flexDirection=\"column\"\n          alignItems=\"center\"\n        >\n          <ReferenceField source=\"company_id\" reference=\"companies\" link=\"show\">\n            <CompanyAvatar />\n          </ReferenceField>\n          <ReferenceField source=\"company_id\" reference=\"companies\" link=\"show\">\n            <TextField source=\"name\" align=\"center\" component=\"div\" />\n          </ReferenceField>\n        </Box>\n        <Box ml={2} flex=\"1\">\n          <Typography variant=\"h5\">{record.name}</Typography>\n\n          <Box display=\"flex\" mt={2}>\n            <Box display=\"flex\" mr={5} flexDirection=\"column\">\n              <Typography color=\"textSecondary\" variant=\"body2\">\n                Start\n              </Typography>\n              <Typography variant=\"body2\">\n                {format(new Date(record.start_at), \"PP\")}\n              </Typography>\n            </Box>\n\n            <Box display=\"flex\" mr={5} flexDirection=\"column\">\n              <Typography color=\"textSecondary\" variant=\"body2\">\n                Budget\n              </Typography>\n              <Typography variant=\"subtitle1\">\n                {record.amount.toLocaleString(\"en-US\", {\n                  notation: \"compact\",\n                  style: \"currency\",\n                  currency: \"USD\",\n                  currencyDisplay: \"narrowSymbol\",\n                  minimumSignificantDigits: 3,\n                })}\n              </Typography>\n            </Box>\n\n            <Box display=\"flex\" mr={5} flexDirection=\"column\">\n              <Typography color=\"textSecondary\" variant=\"body2\">\n                Type\n              </Typography>\n              <Typography variant=\"subtitle1\">{record.type}</Typography>\n            </Box>\n\n            <Box display=\"flex\" mr={5} flexDirection=\"column\">\n              <Typography color=\"textSecondary\" variant=\"body2\">\n                Stage\n              </Typography>\n              <Typography variant=\"subtitle1\">\n                {/* @ts-ignore */}\n                {stageNames[record.stage]}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box mt={2} mb={2}>\n            <Box display=\"flex\" mr={5} flexDirection=\"column\" minHeight={48}>\n              <Typography color=\"textSecondary\" variant=\"body2\">\n                Contacts\n              </Typography>\n              <ReferenceArrayField source=\"contact_ids\" reference=\"contacts\">\n                <ContactList />\n              </ReferenceArrayField>\n            </Box>\n          </Box>\n\n          <Box mt={2} mb={2} style={{ whiteSpace: \"pre-line\" }}>\n            <Typography color=\"textSecondary\" variant=\"body2\">\n              Description\n            </Typography>\n            <Typography>{record.description}</Typography>\n          </Box>\n\n          <Divider />\n\n          <Box mt={2}>\n            <ReferenceManyField\n              target=\"deal_id\"\n              reference=\"dealNotes\"\n              sort={{ field: \"date\", order: \"DESC\" }}\n            >\n              <NotesIterator reference=\"deals\" />\n            </ReferenceManyField>\n          </Box>\n        </Box>\n      </Box>\n    </>\n  );\n};\n","import * as React from 'react';\nimport { useListFilterContext, useGetIdentity } from 'react-admin';\nimport { Switch, FormControlLabel } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginBottom: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n    },\n}));\n\nexport const OnlyMineInput = ({ alwaysOn }: { alwaysOn: boolean }) => {\n    const {\n        filterValues,\n        displayedFilters,\n        setFilters,\n    } = useListFilterContext();\n    const { identity } = useGetIdentity();\n    const classes = useStyles();\n    const handleChange = () => {\n        const newFilterValues = { ...filterValues };\n        if (typeof filterValues.sales_id !== 'undefined') {\n            delete newFilterValues.sales_id;\n        } else {\n            newFilterValues.sales_id = identity && identity?.id;\n        }\n        setFilters(newFilterValues, displayedFilters);\n    };\n    return (\n        <div className={classes.root}>\n            <FormControlLabel\n                control={\n                    <Switch\n                        checked={typeof filterValues.sales_id !== 'undefined'}\n                        onChange={handleChange}\n                        color=\"primary\"\n                        name=\"checkedC\"\n                    />\n                }\n                label=\"Only companies I manage\"\n            />\n        </div>\n    );\n};\n\nOnlyMineInput.defaultProps = { source: 'sales_id' };\n","import * as React from 'react';\nimport {\n    CreateButton,\n    ExportButton,\n    FilterButton,\n    List,\n    ListProps,\n    SearchInput,\n    SelectInput,\n    TopToolbar,\n    useGetIdentity,\n} from 'react-admin';\nimport { Route } from 'react-router';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { DealListContent } from './DealListContent';\nimport { DealCreate } from './DealCreate';\nimport { DealShow } from './DealShow';\nimport { OnlyMineInput } from './OnlyMineInput';\nimport { typeChoices } from './types';\n\nexport const DealList = (props: ListProps) => {\n    const { identity } = useGetIdentity();\n    return identity ? (\n        <>\n            <List\n                {...props}\n                perPage={100}\n                sort={{ field: 'index', order: 'ASC' }}\n                filters={dealFilters}\n                filterDefaultValues={{ sales_id: identity && identity?.id }}\n                actions={<DealActions />}\n                pagination={false}\n                component=\"div\"\n            >\n                <DealListContent />\n            </List>\n            <Route path=\"/deals/create\">\n                {({ match }) => <DealCreate open={!!match} />}\n            </Route>\n            <Route path=\"/deals/:id/show\">\n                {({ match }) =>\n                    !!match ? (\n                        <DealShow open={!!match} id={match?.params?.id} />\n                    ) : null\n                }\n            </Route>\n        </>\n    ) : null;\n};\n\nconst dealFilters = [\n    <SearchInput source=\"q\" alwaysOn />,\n    <OnlyMineInput alwaysOn />,\n    <SelectInput source=\"type\" choices={typeChoices} />,\n];\n\nconst useActionStyles = makeStyles(theme => ({\n    createButton: {\n        marginLeft: theme.spacing(2),\n    },\n}));\nconst DealActions = () => {\n    const classes = useActionStyles();\n    return (\n        <TopToolbar>\n            <FilterButton />\n            <ExportButton />\n            <CreateButton\n                basePath=\"/deals\"\n                variant=\"contained\"\n                label=\"New Deal\"\n                className={classes.createButton}\n            />\n        </TopToolbar>\n    );\n};\n","/* eslint-disable import/no-anonymous-default-export */\nimport { DealList } from './DealList';\n\nexport default {\n    list: DealList,\n};\n","import * as React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Box, Link } from \"@material-ui/core\";\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\nimport { useGetList } from \"react-admin\";\nimport { startOfMonth, format } from \"date-fns\";\nimport { ResponsiveBar } from \"@nivo/bar\";\n\nimport { Deal } from \"../types\";\n\nconst multiplier = {\n  opportunity: 0.2,\n  \"proposal-sent\": 0.5,\n  \"in-negociation\": 0.8,\n  delayed: 0.3,\n};\n\nexport const DealsChart = () => {\n  const { data, ids, loaded } = useGetList<Deal>(\n    \"deals\",\n    { perPage: 100, page: 1 },\n    {\n      field: \"start_at\",\n      order: \"ASC\",\n    }\n  );\n  const [months, setMonths] = useState<any[]>([]);\n\n  useEffect(() => {\n    const deals = ids.map((id) => data[id]);\n\n    const dealsByMonth = deals.reduce((acc, deal) => {\n      const month = startOfMonth(new Date(deal.start_at)).toISOString();\n      if (!acc[month]) {\n        acc[month] = [];\n      }\n      acc[month].push(deal);\n      return acc;\n    }, {} as any);\n\n    const amountByMonth = Object.keys(dealsByMonth).map((month) => {\n      return {\n        date: format(new Date(month), \"MMM\"),\n        won: dealsByMonth[month]\n          .filter((deal: Deal) => deal.stage === \"won\")\n          .reduce((acc: number, deal: Deal) => {\n            acc += deal.amount;\n            return acc;\n          }, 0),\n        pending: dealsByMonth[month]\n          .filter((deal: Deal) => ![\"won\", \"lost\"].includes(deal.stage))\n          .reduce((acc: number, deal: Deal) => {\n            // @ts-ignore\n            acc += deal.amount * multiplier[deal.stage];\n            return acc;\n          }, 0),\n        lost: dealsByMonth[month]\n          .filter((deal: Deal) => deal.stage === \"lost\")\n          .reduce((acc: number, deal: Deal) => {\n            acc -= deal.amount;\n            return acc;\n          }, 0),\n      };\n    });\n\n    setMonths(amountByMonth);\n  }, [ids, data]);\n\n  if (!loaded) return null; // FIXME return skeleton instead\n\n  const range = months.reduce(\n    (acc, month) => {\n      acc.min = Math.min(acc.min, month.lost);\n      acc.max = Math.max(acc.max, month.won + month.pending);\n      return acc;\n    },\n    { min: 0, max: 0 }\n  );\n\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box ml={2} mr={2} display=\"flex\">\n          <AttachMoneyIcon color=\"disabled\" fontSize=\"large\" />\n        </Box>\n        <Link\n          underline=\"none\"\n          variant=\"body2\"\n          color=\"textSecondary\"\n          component={RouterLink}\n          to=\"/deals\"\n        >\n          Upcoming Deal Revenue\n        </Link>\n      </Box>\n      <Box height={500}>\n        <ResponsiveBar\n          data={months}\n          indexBy=\"date\"\n          keys={[\"won\", \"pending\", \"lost\"]}\n          colors={[\"#61cdbb\", \"#97e3d5\", \"#e25c3b\"]}\n          margin={{ top: 50, right: 50, bottom: 50, left: 0 }}\n          padding={0.3}\n          valueScale={{\n            type: \"linear\",\n            min: range.min * 1.2,\n            max: range.max * 1.2,\n          }}\n          indexScale={{ type: \"band\", round: true }}\n          enableGridX={true}\n          enableGridY={false}\n          enableLabel={false}\n          axisTop={{\n            tickSize: 0,\n            tickPadding: 12,\n          }}\n          axisBottom={{\n            legendPosition: \"middle\",\n            legendOffset: 50,\n            tickSize: 0,\n            tickPadding: 12,\n          }}\n          axisLeft={null}\n          axisRight={{\n            format: (v: any) => `${Math.abs(v / 1000)}k`,\n            tickValues: 8,\n          }}\n          markers={\n            [\n              {\n                axis: \"y\",\n                value: 0,\n                lineStyle: { strokeOpacity: 0 },\n                textStyle: { fill: \"#2ebca6\" },\n                legend: \"Won\",\n                legendPosition: \"top-left\",\n                legendOrientation: \"vertical\",\n              },\n              {\n                axis: \"y\",\n                value: 0,\n                lineStyle: {\n                  stroke: \"#f47560\",\n                  strokeWidth: 1,\n                },\n                textStyle: { fill: \"#e25c3b\" },\n                legend: \"Lost\",\n                legendPosition: \"bottom-left\",\n                legendOrientation: \"vertical\",\n              },\n            ] as any\n          }\n        />\n      </Box>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Card, Box, Link } from \"@material-ui/core\";\nimport ContactsIcon from \"@material-ui/icons/Contacts\";\nimport { useGetList, SimpleList, useGetIdentity } from \"react-admin\";\nimport { formatDistance } from \"date-fns\";\n\nimport { Avatar } from \"../contacts/Avatar\";\nimport { Contact } from \"../types\";\n\nexport const HotContacts = () => {\n  const { identity } = useGetIdentity();\n  const {\n    data: contactData,\n    ids: contactIds,\n    total: contactTotal,\n    loaded: contactsLoaded,\n  } = useGetList<Contact>(\n    \"contacts\",\n    { page: 1, perPage: 10 },\n    { field: \"last_seen\", order: \"DESC\" },\n    { status: \"hot\", sales_id: identity?.id },\n    { enabled: Number.isInteger(identity?.id) }\n  );\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n        <Box ml={2} mr={2} display=\"flex\">\n          <ContactsIcon color=\"disabled\" fontSize=\"large\" />\n        </Box>\n        <Link\n          underline=\"none\"\n          variant=\"body2\"\n          color=\"textSecondary\"\n          component={RouterLink}\n          to=\"/contacts\"\n        >\n          Hot contacts\n        </Link>\n      </Box>\n      <Card>\n        <SimpleList<Contact>\n          basePath=\"/contacts\"\n          linkType=\"show\"\n          ids={contactIds}\n          data={contactData}\n          total={contactTotal}\n          loaded={contactsLoaded}\n          primaryText={(contact) =>\n            `${contact.first_name} ${contact.last_name}`\n          }\n          secondaryText={(contact) =>\n            formatDistance(new Date(contact.last_seen), new Date(), {\n              addSuffix: true,\n            })\n          }\n          leftAvatar={(contact) => <Avatar record={contact} />}\n        />\n      </Card>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { Card, CardContent, Typography, Box } from \"@material-ui/core\";\nimport NoteIcon from \"@material-ui/icons/Note\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  useGetList,\n  useGetIdentity,\n  ReferenceField,\n  TextField,\n  FunctionField,\n} from \"react-admin\";\nimport { formatDistance } from \"date-fns\";\n\nimport { Contact as ContactType } from \"../types\";\n\nconst useStyles = makeStyles((theme) => ({\n  note: {\n    marginBottom: theme.spacing(2),\n  },\n  noteText: {\n    backgroundColor: \"#edf3f0\",\n    padding: theme.spacing(1),\n    borderRadius: 10,\n  },\n  noteTextText: {\n    display: \"-webkit-box\",\n    \"-webkit-line-clamp\": 3,\n    \"-webkit-box-orient\": \"vertical\",\n    overflow: \"hidden\",\n  },\n}));\n\nexport const LatestNotes = () => {\n  const classes = useStyles();\n  const { identity } = useGetIdentity();\n  const {\n    data: contactNotesData,\n    ids: contactNotesIds,\n    loaded: contactNotesLoaded,\n  } = useGetList(\n    \"contactNotes\",\n    { page: 1, perPage: 5 },\n    { field: \"date\", order: \"DESC\" },\n    { sales_id: identity?.id },\n    { enabled: Number.isInteger(identity?.id) }\n  );\n  const {\n    data: dealNotesData,\n    ids: dealNotesIds,\n    loaded: dealNotesLoaded,\n  } = useGetList(\n    \"dealNotes\",\n    { page: 1, perPage: 5 },\n    { field: \"date\", order: \"DESC\" },\n    { sales_id: identity?.id },\n    { enabled: Number.isInteger(identity?.id) }\n  );\n  if (!contactNotesLoaded || !dealNotesLoaded) {\n    return null;\n  }\n  // TypeScript guards\n  if (\n    !contactNotesIds ||\n    !contactNotesData ||\n    !dealNotesIds ||\n    !dealNotesData\n  ) {\n    return null;\n  }\n\n  const allNotes = ([] as any[])\n    .concat(\n      contactNotesIds.map((id) => ({\n        ...contactNotesData[id],\n        type: \"contactNote\",\n      })),\n      dealNotesIds.map((id) => ({ ...dealNotesData[id], type: \"dealNote\" }))\n    )\n    .sort((a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf())\n    .slice(0, 5);\n\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n        <Box ml={2} mr={2} display=\"flex\">\n          <NoteIcon color=\"disabled\" fontSize=\"large\" />\n        </Box>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          My Latest Notes\n        </Typography>\n      </Box>\n      <Card>\n        <CardContent>\n          {allNotes.map((note) => (\n            <div\n              id={`${note.type}_${note.id}`}\n              key={`${note.type}_${note.id}`}\n              className={classes.note}\n            >\n              <Typography color=\"textSecondary\" gutterBottom>\n                {note.type === \"dealNote\" ? (\n                  <Deal note={note} />\n                ) : (\n                  <Contact note={note} />\n                )}\n                , added{\" \"}\n                {formatDistance(new Date(note.date), new Date(), {\n                  addSuffix: true,\n                })}\n              </Typography>\n              <div className={classes.noteText}>\n                <Typography className={classes.noteTextText}>\n                  {note.text}\n                </Typography>\n              </div>\n            </div>\n          ))}\n        </CardContent>\n      </Card>\n    </>\n  );\n};\n\nconst Deal = ({ note }: any) => (\n  <>\n    Deal{\" \"}\n    <ReferenceField\n      record={note}\n      source=\"deal_id\"\n      reference=\"deals\"\n      basePath=\"/deals\"\n      link=\"show\"\n    >\n      <TextField source=\"name\" variant=\"body1\" />\n    </ReferenceField>\n  </>\n);\n\nconst Contact = ({ note }: any) => (\n  <>\n    Contact{\" \"}\n    <ReferenceField\n      record={note}\n      source=\"contact_id\"\n      reference=\"contacts\"\n      basePath=\"/contacts\"\n      link=\"show\"\n    >\n      <FunctionField<ContactType>\n        variant=\"body1\"\n        render={(contact) =>\n          contact ? `${contact.first_name} ${contact.last_name}` : \"\"\n        }\n      />\n    </ReferenceField>\n  </>\n);\n","import * as React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Card, Link, Box } from \"@material-ui/core\";\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\nimport {\n  useGetList,\n  SimpleList,\n  useGetIdentity,\n  ReferenceField,\n  Identifier,\n} from \"react-admin\";\n\nimport { CompanyAvatar } from \"../companies/CompanyAvatar\";\nimport { stages, stageNames } from \"../deals/stages\";\nimport { Deal } from \"../types\";\n\nexport const DealsPipeline = () => {\n  const { identity } = useGetIdentity();\n  const {\n    data,\n    ids: unorderedIds,\n    total,\n    loaded,\n  } = useGetList<Deal>(\n    \"deals\",\n    { page: 1, perPage: 10 },\n    { field: \"last_seen\", order: \"DESC\" },\n    { stage_neq: \"lost\", sales_id: identity?.id },\n    { enabled: Number.isInteger(identity?.id) }\n  );\n  const [ids, setIds] = useState(unorderedIds);\n  useEffect(() => {\n    const deals = unorderedIds.map((id) => data[id]);\n    const orderedIds: Identifier[] = [];\n    stages\n      .filter((stage) => stage !== \"won\")\n      .forEach((stage) =>\n        deals\n          .filter((deal) => deal.stage === stage)\n          .forEach((deal) => orderedIds.push(deal.id))\n      );\n    setIds(orderedIds);\n  }, [unorderedIds, data]);\n  return (\n    <>\n      <Box display=\"flex\" alignItems=\"center\" marginBottom=\"1em\">\n        <Box ml={2} mr={2} display=\"flex\">\n          <MonetizationOnIcon color=\"disabled\" fontSize=\"large\" />\n        </Box>\n        <Link\n          underline=\"none\"\n          variant=\"body2\"\n          color=\"textSecondary\"\n          component={RouterLink}\n          to=\"/deals\"\n        >\n          Deals Pipeline\n        </Link>\n      </Box>\n      <Card>\n        <SimpleList<Deal>\n          basePath=\"/deals\"\n          linkType=\"show\"\n          ids={ids}\n          data={data}\n          total={total}\n          loaded={loaded}\n          primaryText={(deal) => deal.name}\n          secondaryText={(deal) =>\n            `${deal.amount.toLocaleString(\"en-US\", {\n              notation: \"compact\",\n              style: \"currency\",\n              currency: \"USD\",\n              currencyDisplay: \"narrowSymbol\",\n              minimumSignificantDigits: 3,\n              // @ts-ignore\n            })} , ${stageNames[deal.stage]}`\n          }\n          leftAvatar={(deal) => (\n            <ReferenceField\n              source=\"company_id\"\n              record={deal}\n              reference=\"companies\"\n              resource=\"deals\"\n              basePath=\"/deals\"\n              link={false}\n            >\n              <CompanyAvatar size=\"small\" />\n            </ReferenceField>\n          )}\n        />\n      </Card>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { Box } from \"@material-ui/core\";\nimport { DealsChart } from \"./DealsChart\";\nimport { HotContacts } from \"./HotContacts\";\nimport { LatestNotes } from \"./LatestNotes\";\nimport { DealsPipeline } from \"./DealsPipeline\";\n\nexport const Dashboard = () => {\n  return (\n    <>\n      <Box display=\"flex\" mt=\"2em\">\n        <Box flex=\"3\" mr=\"1em\">\n          <DealsChart />\n        </Box>\n      </Box>\n      <Box display=\"flex\" mt=\"2em\">\n        <Box flex=\"1\" mr=\"1em\">\n          <LatestNotes />\n        </Box>\n        <Box flex=\"1\" display=\"flex\">\n          <Box flex=\"1\" mr=\"1em\">\n            <HotContacts />\n          </Box>\n          <Box flex=\"1\">\n            <DealsPipeline />\n          </Box>\n        </Box>\n      </Box>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { Admin, Resource, ListGuesser } from \"react-admin\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\nimport { dataProvider } from \"./dataProvider\";\nimport { authProvider } from \"./authProvider\";\nimport Layout from \"./Layout\";\nimport contacts from \"./contacts\";\nimport companies from \"./companies\";\nimport deals from \"./deals\";\nimport { Dashboard } from \"./dashboard/Dashboard\";\n\nconst theme = createMuiTheme({\n  typography: {\n    button: {\n      textTransform: \"none\",\n    },\n  },\n});\n\nconst App = () => (\n  <Admin\n    dataProvider={dataProvider}\n    authProvider={authProvider}\n    layout={Layout}\n    dashboard={Dashboard}\n    theme={theme}\n  >\n    <Resource name=\"deals\" {...deals} />\n    <Resource name=\"contacts\" {...contacts} />\n    <Resource name=\"companies\" {...companies} />\n    <Resource name=\"contactNotes\" />\n    <Resource name=\"dealNotes\" />\n    <Resource name=\"tasks\" list={ListGuesser} />\n    <Resource name=\"sales\" list={ListGuesser} />\n    <Resource name=\"tags\" list={ListGuesser} />\n  </Admin>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}