(this["webpackJsonpreact-admin-crm"]=this["webpackJsonpreact-admin-crm"]||[]).push([[0],{923:function(e,t){},974:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(33),s=a.n(r),i=a(16),o=a(1124),l=a(1123),d=a(1125),j=a(562),b=a(474),u=a(61),x=a(22),O=[{id:0,name:"football-fan",color:"#eddcd2"},{id:1,name:"holiday-card",color:"#fff1e6"},{id:2,name:"influencer",color:"#fde2e4"},{id:3,name:"manager",color:"#fad2e1"},{id:4,name:"musician",color:"#c5dedd"},{id:5,name:"vip",color:"#dbe7e4"}],m=a(230),h=a.n(m),f=function(e){return h.a.random.number(99)<e},p=function(e,t){var a=e instanceof Date?e.getTime():Date.now()-15768e7,n=(t instanceof Date?t.getTime():Date.now())-a,c=h.a.random.number({max:n}),r=Math.sqrt(c/n)*n;return new Date(a+r)},g=["Communication Services","Consumer Discretionary","Consumer Staples","Energy","Financials","Health Care","Industrials","Information Technology","Materials","Real Estate","Utilities"],y=[1,10,50,250,500],v=/\W+/,_=["male","female"],S=["cold","cold","cold","warm","warm","hot","in-contract"],w={1:1,10:4,50:12,250:25,500:50},C=["Email","Call","Call","Call","Call","Meeting","Reminder"],k=["cold","cold","cold","warm","warm","hot","in-contract"],D=["Email","Email","Email","Email","Email","Email","Call","Call","Call","Call","Call","Call","Call","Call","Call","Call","Call","Demo","Lunch","Meeting","Follow-up","Follow-up","Thank you","Ship","None"],N=a(1139),I=["Other","Copywriting","Print project","UI Design","Website design"],P=["opportunity","proposal-sent","in-negociation","won","lost","delayed"],E=["Email","Call","Call","Call","Call","Meeting","Reminder"],T=Object(b.a)(function(){var e={};return e.sales=function(e){var t=Array.from(Array(10).keys()).map((function(e){var t=x.name.firstName(),a=x.name.lastName();return{id:e+1,first_name:t,last_name:a,email:x.internet.email(t,a)}}));return[{id:0,first_name:"Jane",last_name:"Doe",email:"janedoe@atomic.dev"}].concat(Object(u.a)(t))}(),e.tags=[].concat(O),e.companies=function(e){return Array.from(Array(55).keys()).map((function(t){var a=x.company.companyName();return{id:t,name:a,logo:"/logos/".concat(t,".png"),sector:x.random.arrayElement(g),size:x.random.arrayElement(y),linkedIn:"https://www.linkedin.com/company/".concat(a.toLowerCase().replace(v,"_")),website:x.internet.url(),phone_number:x.phone.phoneNumber(),address:x.address.streetAddress(),zipcode:x.address.zipCode(),city:x.address.city(),stateAbbr:x.address.stateAbbr(),nb_contacts:0,nb_deals:0,sales_id:0===x.random.number(2)?0:x.random.arrayElement(e.sales).id,created_at:p().toISOString()}}))}(e),e.contacts=function(e){var t=0;return Array.from(Array(500).keys()).map((function(a){var n,c=f(25)&&t<223,r=x.random.arrayElement(_),s=x.name.firstName(r),i=x.name.lastName(),o=x.internet.email(s,i),l=c?"https://marmelab.com/posters/avatar-"+(223-t)+".jpeg":void 0,d=x.company.bsAdjective();c&&t++;do{n=x.random.arrayElement(e.companies)}while(n.nb_contacts>=w[n.size]);n.nb_contacts++;var j=p(new Date(n.created_at)).toISOString(),b=j;return{id:a,first_name:s,last_name:i,gender:r,title:d.charAt(0).toUpperCase()+d.substr(1),company_id:n.id,email:o,phone_number1:x.phone.phoneNumber(),phone_number2:x.phone.phoneNumber(),background:x.lorem.sentence(),acquisition:x.random.arrayElement(["inbound","outbound"]),avatar:l,first_seen:j,last_seen:b,has_newsletter:f(30),status:x.random.arrayElement(S),tags:x.random.arrayElements(e.tags,x.random.arrayElement([0,0,0,1,1,2])).map((function(e){return e.id})),sales_id:n.sales_id,nb_notes:0}}))}(e),e.contactNotes=function(e){return Array.from(Array(1200).keys()).map((function(t){var a=x.random.arrayElement(e.contacts),n=p(new Date(a.first_seen)).toISOString();return a.nb_notes++,a.last_seen=n>a.last_seen?n:a.last_seen,{id:t,contact_id:a.id,type:x.random.arrayElement(C),text:x.lorem.paragraphs(x.random.number({min:1,max:4})),date:n,sales_id:a.sales_id,status:x.random.arrayElement(k)}}))}(e),e.deals=function(e){var t=Array.from(Array(50).keys()).map((function(t){var a=x.random.arrayElement(e.companies);a.nb_deals++;var n=x.random.arrayElements(e.contacts.filter((function(e){return e.company_id===a.id})),x.random.number({min:1,max:3})),c=x.lorem.words(),r=p(new Date(a.created_at)).toISOString();return{id:t,name:c[0].toUpperCase()+c.slice(1),company_id:a.id,contact_ids:n.map((function(e){return e.id})),type:x.random.arrayElement(I),stage:x.random.arrayElement(P),description:x.lorem.paragraphs(x.random.number({min:1,max:4})),amount:100*x.random.number(1e3),created_at:r,updated_at:p(new Date(r)).toISOString(),start_at:p(new Date,Object(N.a)(new Date,{months:6})).toISOString(),sales_id:a.sales_id,index:0,nb_notes:0}}));return P.forEach((function(e){t.filter((function(t){return t.stage===e})).forEach((function(e,a){t[e.id].index=a}))})),t}(e),e.dealNotes=function(e){return Array.from(Array(300).keys()).map((function(t){var a=x.random.arrayElement(e.deals);return a.nb_notes++,{id:t,deal_id:a.id,type:x.random.arrayElement(E),text:x.lorem.paragraphs(x.random.number({min:1,max:4})),date:p(new Date(e.companies[a.company_id].created_at)).toISOString(),sales_id:a.sales_id}}))}(e),e.tasks=function(e){return Array.from(Array(400).keys()).map((function(t){var a=x.random.arrayElement(e.contacts);return{id:t,contact_id:a.id,type:x.random.arrayElement(D),text:x.lorem.sentence(),due_date:p(new Date(a.first_seen)),sales_id:a.sales_id}}))}(e),function(e){e.contactNotes.sort((function(e,t){return new Date(e.date).valueOf()-new Date(t.date).valueOf()})).forEach((function(t){e.contacts[t.contact_id].status=t.status}))}(e),e}(),!0),A=new Proxy(T,{get:function(e,t){return function(e,a){return new Promise((function(n){return setTimeout((function(){return n(T[t](e,a))}),300)}))}}});localStorage.setItem("username","Adrian Sudbury");var L={login:function(e){var t=e.username;return localStorage.setItem("username",t),Promise.resolve()},logout:function(){return localStorage.removeItem("username"),Promise.resolve()},checkError:function(){return Promise.resolve()},checkAuth:function(){return localStorage.getItem("username")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.reject("Unknown method")},getIdentity:function(){return Promise.resolve({id:0,fullName:"Adrian Sudbury",avatar:"https://avatars.githubusercontent.com/u/3384470?v=4"})}},W=a(49),z=a(75),F=a(76),B=a(77),M=a(35),R=a(1078),U=a(1079),H=a(1080),V=a(486),q=a(296),G=a(67),J=a(1075),X=a(977),Y=a(584),K=a(56),Q=a(1130),Z=a(1076),$=a(27),ee=a(346),te=a(1077),ae=a(2),ne=Object(G.a)({root:{flexGrow:1},logo:{width:50,height:43.54}}),ce=function(){var e,t=ne(),a=Object(M.i)(["/contacts","/companies","/deals"]),n=null!==(e=null===a||void 0===a?void 0:a.path)&&void 0!==e?e:"/";return Object(ae.jsx)("nav",{className:t.root,children:Object(ae.jsx)(J.a,{position:"static",color:"primary",children:Object(ae.jsx)(X.a,{variant:"dense",children:Object(ae.jsxs)(Y.a,{flex:1,display:"flex",justifyContent:"space-between",children:[Object(ae.jsxs)(Y.a,{display:"flex",alignItems:"center",children:[Object(ae.jsx)("img",{className:t.logo,src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg",alt:"Bosch Logo"}),Object(ae.jsx)(K.a,{component:"span",variant:"body2",children:"React Admin CRM"})]}),Object(ae.jsx)(Y.a,{children:Object(ae.jsxs)(Q.a,{value:n,"aria-label":"Navigation Tabs",children:[Object(ae.jsx)(Z.a,{label:"Dashboard",component:$.a,to:"/",value:"/"}),Object(ae.jsx)(Z.a,{label:"Contacts",component:$.a,to:"/contacts",value:"/contacts"}),Object(ae.jsx)(Z.a,{label:"Companies",component:$.a,to:"/companies",value:"/companies"}),Object(ae.jsx)(Z.a,{label:"Deals",component:$.a,to:"/deals",value:"/deals"})]})}),Object(ae.jsx)(Y.a,{display:"flex",children:Object(ae.jsx)(ee.a,{logout:Object(ae.jsx)(te.a,{button:!0})})})]})})})})},re=function(e){Object(F.a)(a,e);var t=Object(B.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).state={hasError:!1,errorMessage:void 0,errorInfo:void 0},e.history.listen((function(){n.state.hasError&&n.setState({hasError:!1})})),n}return Object(z.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,errorMessage:e,errorInfo:t})}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.title,n=e.children,c=this.state,r=c.hasError,s=c.errorMessage,i=c.errorInfo;return Object(ae.jsxs)(R.a,{theme:Object(j.a)(t),children:[Object(ae.jsx)(U.a,{}),Object(ae.jsx)(ce,{}),Object(ae.jsx)(H.a,{children:Object(ae.jsx)("main",{id:"main-content",children:r?Object(ae.jsx)(V.a,{error:s,errorInfo:i,title:a}):n})}),Object(ae.jsx)(q.a,{})]})}}]),a}(n.Component),se=Object(M.j)(re),ie=a(1138),oe=a(1097),le=a(566),de=a(231),je=a(1135),be=a(1098),ue=a(1099),xe=a(200),Oe=function(e){var t=e.record;return Object(ae.jsxs)(xe.a,{src:t.avatar,children:[t.first_name.charAt(0),t.last_name.charAt(0)]})},me=a(1088),he=a(1089),fe=a(496),pe=a(497),ge=a(1091),ye=a(576),ve=a(1090),_e=a(365),Se=a(169),we=a(19),Ce=a(490),ke=a(1024),De=a(1081),Ne=a(983),Ie=a(1025),Pe=a(361),Ee=a(304),Te=a(1084),Ae=a(1085),Le=a(1086),We=a(573),ze=a(1087),Fe=a(364),Be=a(493),Me=a.n(Be),Re=a(273),Ue=a.n(Re),He=["#eddcd2","#fff1e6","#fde2e4","#fad2e1","#c5dedd","#dbe7e4","#f0efeb","#d6e2e9","#bcd4e6","#99c1de"],Ve=function(e){var t=e.record,a=Object(n.useState)(!1),c=Object(we.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(""),o=Object(we.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(He[0]),b=Object(we.a)(j,2),x=b[0],O=b[1],m=Object(n.useState)(null),h=Object(we.a)(m,2),f=h[0],p=h[1],g=Object(n.useState)(0),y=Object(we.a)(g,2),v=y[0],_=y[1],S=Object(n.useState)(!1),w=Object(we.a)(S,2),C=w[0],k=w[1],D=Object(Ce.a)("tags",{page:1,perPage:10},{field:"name",order:"ASC"},{},{version:v}),N=D.data,I=D.ids,P=Object(ke.a)("tags",t.tags,{enabled:t.tags&&t.tags.length>0}),E=P.data,T=P.loaded,A=Object(De.a)(),L=Object(we.a)(A,1)[0],W=Object(Ne.a)(),z=Object(we.a)(W,1)[0],F=I&&I.filter((function(e){return!t.tags.includes(e)})),B=function(e){var a=[].concat(Object(u.a)(t.tags),[e]);L("contacts",t.id,{tags:a},t),p(null)},M=function(){s(!0),p(null),k(!1)};return T&&E?Object(ae.jsxs)(ae.Fragment,{children:[E.map((function(e){return Object(ae.jsx)(Y.a,{mt:1,mb:1,children:Object(ae.jsx)(Ie.a,{size:"small",variant:"outlined",onDelete:function(){return function(e){var a=t.tags.filter((function(t){return t!==e}));L("contacts",t.id,{tags:a},t)}(e.id)},label:e.name,style:{backgroundColor:e.color,border:0}})},e.id)})),Object(ae.jsx)(Y.a,{mt:1,children:Object(ae.jsx)(Ie.a,{icon:Object(ae.jsx)(Me.a,{}),size:"small",variant:"outlined",onClick:function(e){p(e.currentTarget)},label:"Add tag",color:"primary"})}),Object(ae.jsxs)(Pe.a,{open:Boolean(f),onClose:function(){p(null)},anchorEl:f,children:[null===F||void 0===F?void 0:F.map((function(e){return Object(ae.jsx)(Ee.a,{onClick:function(){return B(e)},children:Object(ae.jsx)(Ie.a,{size:"small",variant:"outlined",label:N&&N[e].name,style:{backgroundColor:N&&N[e].color,border:0},onClick:function(){return B(e)}})},e)})),Object(ae.jsx)(Ee.a,{onClick:M,children:Object(ae.jsx)(Ie.a,{icon:Object(ae.jsx)(Ue.a,{}),size:"small",variant:"outlined",onClick:M,color:"primary",label:"Create new tag"})})]}),Object(ae.jsx)(Te.a,{open:r,onClose:function(){return s(!1)},"aria-labelledby":"form-dialog-title",children:Object(ae.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k(!0),z("tags",{name:l,color:x},{onSuccess:function(e){var a=e.data;L("contacts",t.id,{tags:[].concat(Object(u.a)(t.tags),[a.id])},t,{onSuccess:function(){d(""),O(He[0]),s(!1),_((function(e){return e+1}))}})}})},children:[Object(ae.jsx)(Ae.a,{id:"form-dialog-title",children:"Create a new tag"}),Object(ae.jsxs)(Le.a,{children:[Object(ae.jsx)(We.a,{autoFocus:!0,label:"Tag name",fullWidth:!0,value:l,onChange:function(e){d(e.target.value)}}),Object(ae.jsx)(Y.a,{display:"flex",flexWrap:"wrap",width:230,mt:2,children:He.map((function(e){return Object(ae.jsx)(Ge,{color:e,selected:e===x,handleClick:function(){O(e)}},e)}))})]}),Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(Fe.a,{onClick:function(){return s(!1)},color:"primary",children:"Cancel"}),Object(ae.jsx)(Fe.a,{type:"submit",color:"primary",disabled:C,children:"Add tag"})]})]})})]}):null},qe=Object(G.a)({root:{width:30,height:30,borderRadius:15,display:"inline-block",margin:8}}),Ge=function(e){var t=e.color,a=e.handleClick,n=e.selected,c=qe();return Object(ae.jsx)("button",{type:"button",className:c.root,style:{backgroundColor:t,border:n?"2px solid grey":"none"},onClick:a})},Je=function(e){var t=e.record,a=e.link,n=void 0===a?"edit":a;return Object(ae.jsxs)(Y.a,{ml:4,width:250,minWidth:250,children:[Object(ae.jsx)(Y.a,{textAlign:"center",mb:2,children:"edit"===n?Object(ae.jsx)(me.a,{basePath:"/contacts",record:t,label:"Edit Contact"}):Object(ae.jsx)(he.a,{basePath:"/contacts",record:t,label:"Show Contact"})}),Object(ae.jsx)(K.a,{variant:"body2",children:"Personal info"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Y.a,{mt:2,children:Object(ae.jsx)(fe.a,{source:"email"})}),Object(ae.jsxs)(Y.a,{mt:1,children:[Object(ae.jsx)(de.a,{source:"phone_number1"})," ",Object(ae.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:"Work"})]}),Object(ae.jsxs)(Y.a,{mb:1,children:[Object(ae.jsx)(de.a,{source:"phone_number2"})," ",Object(ae.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:"Home"})]}),Object(ae.jsx)(Y.a,{mb:3,children:Object(ae.jsx)(K.a,{variant:"body2",children:"male"===t.gender?"He/Him":"She/Her"})}),Object(ae.jsx)(K.a,{variant:"body2",children:"Background"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Y.a,{mt:2,children:t&&t.background}),Object(ae.jsxs)(Y.a,{mt:1,mb:3,children:[Object(ae.jsx)(K.a,{component:"span",variant:"body2",color:"textSecondary",children:"Added on"})," ",Object(ae.jsx)(pe.a,{source:"first_seen",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),Object(ae.jsx)("br",{}),Object(ae.jsx)(K.a,{component:"span",variant:"body2",color:"textSecondary",children:"Last seen on"})," ",Object(ae.jsx)(pe.a,{source:"last_seen",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),Object(ae.jsx)("br",{}),Object(ae.jsx)(K.a,{component:"span",variant:"body2",color:"textSecondary",children:"Followed by"})," ",Object(ae.jsx)(le.a,{resource:"contacts",source:"sales_id",reference:"sales",children:Object(ae.jsx)(ge.a,{source:"last_name",render:function(e){return e?"".concat(e.first_name," ").concat(e.last_name):""}})})]}),Object(ae.jsxs)(Y.a,{mb:3,children:[Object(ae.jsx)(K.a,{variant:"body2",children:"Tags"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Ve,{record:t})]}),Object(ae.jsx)(je.a,{resource:"contacts",target:"contact_id",reference:"tasks",children:Object(ae.jsx)(Xe,{})})]})},Xe=function(){var e=Object(ye.a)(),t=e.data,a=e.ids;return e.loading||0===a.length?null:Object(ae.jsxs)(Y.a,{children:[Object(ae.jsx)(K.a,{variant:"body2",children:"Tasks"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(_e.a,{children:a.map((function(e){var a=t[e];return Object(ae.jsx)(Se.a,{disableGutters:!0,children:Object(ae.jsxs)(Y.a,{children:[Object(ae.jsx)(K.a,{variant:"body2",children:a.text}),Object(ae.jsxs)(K.a,{variant:"body2",color:"textSecondary",children:["due"," ",Object(ae.jsx)(pe.a,{source:"due_date",record:a})]})]})},e)}))})]})},Ye=Object(G.a)({image:{objectFit:"contain"}}),Ke={medium:42,small:20},Qe=function(e){var t=e.record,a=(e.source,e.size),n=void 0===a?"medium":a,c=Ye();return t?Object(ae.jsx)("img",{src:"/react-admin-crm"+t.logo,alt:t.name,title:t.name,width:Ke[n],height:Ke[n],className:c.image}):null},Ze=a(93),$e=a(80),et=a(198),tt=a(1082),at=a(215),nt=a(978),ct=a(5),rt=function(e){return"cold"===e?"#7dbde8":"warm"===e?"#e8cb7d":"hot"===e?"#e88b7d":"in-contract"===e?"#a4e87d":"#000"},st=function(e){var t=e.status;return Object(ae.jsx)(Y.a,{width:10,height:10,display:"inline-block",borderRadius:5,bgcolor:rt(t),component:"span"})},it=Object(G.a)({root:{width:150}}),ot=function(e){var t=e.status,a=e.setStatus,n=e.className,c=void 0===n?"":n,r=it();return Object(ae.jsxs)(We.a,{select:!0,value:t,onChange:function(e){a(e.target.value)},variant:"filled",label:!1,margin:"none",size:"small",className:Object(ct.a)(c,r.root),children:[Object(ae.jsxs)(Ee.a,{value:"cold",children:["Cold ",Object(ae.jsx)(st,{status:"cold"})]}),Object(ae.jsxs)(Ee.a,{value:"warm",children:["Warm ",Object(ae.jsx)(st,{status:"warm"})]}),Object(ae.jsxs)(Ee.a,{value:"hot",children:["Hot ",Object(ae.jsx)(st,{status:"hot"})]}),Object(ae.jsxs)(Ee.a,{value:"in-contract",children:["In Contract ",Object(ae.jsx)(st,{status:"in-contract"})]})]})},lt=Object(G.a)((function(e){return{root:{marginTop:e.spacing(4),marginBottom:e.spacing(1)},toolbar:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(1)},small:{marginRight:"1em","& .MuiFilledInput-input":{paddingTop:10}}}})),dt=function(e){var t=e.showStatus,a=e.reference,c=lt(),r=Object($e.b)(),s=Object(et.a)(),i=Object(n.useState)(""),o=Object(we.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(r&&r.status),b=Object(we.a)(j,2),u=b[0],x=b[1],O=Object(n.useState)(jt()),m=Object(we.a)(O,2),h=m[0],f=m[1],p=Object(Ne.a)(),g=Object(we.a)(p,2),y=g[0],v=g[1].loading,_=Object(De.a)(),S=Object(we.a)(_,1)[0],w=Object(tt.a)(),C=Object(at.a)(),k=Object(nt.a)().identity;if(!r||!k)return null;return Object(ae.jsx)("div",{className:c.root,children:Object(ae.jsxs)("form",{onSubmit:function(e){var n;e.preventDefault();var c=(n={},Object(Ze.a)(n,bt[a],r.id),Object(Ze.a)(n,"sales_id",k.id),Object(Ze.a)(n,"date",h),Object(Ze.a)(n,"text",l),n);return t&&(c.status=u),S(a,r&&r.id,{last_seen:h,status:u,nb_notes:r.nb_notes+1},r),y(s,c,{onSuccess:function(){d(""),C("Note added successfully"),w()}}),!1},children:[Object(ae.jsx)(We.a,{label:"Add a note",variant:"filled",size:"small",fullWidth:!0,multiline:!0,value:l,onChange:function(e){return d(e.target.value)},rows:3}),Object(ae.jsxs)("div",{className:c.toolbar,children:[Object(ae.jsx)("span",{children:l?Object(ae.jsxs)(ae.Fragment,{children:[t&&Object(ae.jsx)(ot,{status:u,setStatus:x,className:c.small}),Object(ae.jsx)(We.a,{type:"datetime-local",variant:"filled",size:"small",value:h,onChange:function(e){f(e.target.value)},className:c.small})]}):null}),Object(ae.jsx)(Fe.a,{type:"submit",variant:"contained",color:"primary",disabled:!l||v,children:"Add this note"})]})]})})},jt=function(){var e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,-1)},bt={contacts:"contact_id",deals:"deal_id"},ut=a(1092),xt=a(986),Ot=a(570),mt=a(168),ht=a(110),ft=a.n(ht),pt=Object(G.a)((function(e){return{root:{marginBottom:e.spacing(2)},metadata:{marginBottom:e.spacing(1),color:e.palette.text.secondary},textarea:{paddingTop:16,paddingLeft:14,paddingRight:60,paddingBottom:14,lineHeight:1.3},buttons:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(1)},cancel:{marginRight:e.spacing(1)},content:{backgroundColor:"#edf3f0",padding:"0 1em",borderRadius:10,display:"flex",alignItems:"stretch",marginBottom:e.spacing(1)},text:{flex:1},paragraph:{fontFamily:e.typography.fontFamily,fontSize:e.typography.body1.fontSize,lineHeight:1.3,marginBottom:e.spacing(2.4)},toolbar:{marginLeft:e.spacing(2),visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-around"}}})),gt=function(e){var t=e.showStatus,a=e.note,c=(e.isLast,e.reference),r=Object(n.useState)(!1),s=Object(we.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(!1),d=Object(we.a)(l,2),j=d[0],b=d[1],u=Object(n.useState)(a.text),x=Object(we.a)(u,2),O=x[0],m=x[1],h=Object(et.a)(),f=Object($e.b)(),p=Object(at.a)(),g=pt(),y=Object(De.a)(),v=Object(we.a)(y,2),_=v[0],S=v[1].loading,w=Object(ut.a)(h,a.id,a,{mutationMode:"undoable",onSuccess:function(){p("Note deleted",void 0,void 0,!0),_(c,f.id,{nb_notes:f.nb_notes-1},f)}}),C=Object(we.a)(w,1)[0];return Object(ae.jsxs)("div",{className:g.root,onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:[Object(ae.jsxs)("div",{className:g.metadata,children:[Object(ae.jsx)(le.a,{record:a,resource:"contactNotes",source:"sales_id",reference:"sales",basePath:"/contactNotes",children:Object(ae.jsx)(de.a,{source:"first_name",variant:"body1"})})," ",Object(ae.jsxs)(K.a,{component:"span",variant:"body1",children:["added a note on"," "]}),Object(ae.jsx)(pe.a,{source:"date",record:a,variant:"body1",showTime:!0,locales:"en",options:{dateStyle:"full",timeStyle:"short"}})," ",t&&Object(ae.jsx)(st,{status:a.status})]}),j?Object(ae.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_(h,a.id,{text:O},a,{onSuccess:function(){b(!1),m(a.text),o(!1)}})},children:[Object(ae.jsx)(xt.a,{value:O,onChange:function(e){m(e.target.value)},fullWidth:!0,multiline:!0,className:g.textarea,autoFocus:!0}),Object(ae.jsxs)("div",{className:g.buttons,children:[Object(ae.jsx)(Fe.a,{className:g.cancel,onClick:function(){b(!1),m(a.text),o(!1)},color:"primary",children:"Cancel"}),Object(ae.jsx)(Fe.a,{type:"submit",color:"primary",variant:"contained",disabled:S,children:"Update Note"})]})]}):Object(ae.jsxs)("div",{className:g.content,children:[Object(ae.jsx)("div",{className:g.text,children:a.text.split("\n").map((function(e,t){return Object(ae.jsx)("p",{className:g.paragraph,children:e},t)}))}),Object(ae.jsxs)("div",{className:g.toolbar,style:{visibility:i?"visible":"hidden"},children:[Object(ae.jsx)(Ot.a,{title:"Edit note",children:Object(ae.jsx)(mt.a,{size:"small",onClick:function(){b(!0)},children:Object(ae.jsx)(Ue.a,{})})}),Object(ae.jsx)(Ot.a,{title:"Delete note",children:Object(ae.jsx)(mt.a,{size:"small",onClick:C,children:Object(ae.jsx)(ft.a,{})})})]})]})]})},yt=Object(G.a)({root:{marginTop:"0.5em"}}),vt=function(e){var t=e.showStatus,a=e.reference,n=yt(),c=Object(ye.a)(),r=c.data,s=c.ids;return c.loaded?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(dt,{showStatus:t,reference:a}),Object(ae.jsx)("div",{className:n.root,children:s.map((function(e,n){return Object(ae.jsx)(gt,{note:r[e],isLast:n===s.length-1,showStatus:t,reference:a},n)}))})]}):null},_t=function(){var e=Object(oe.a)(),t=e.record;return e.loaded&&t?Object(ae.jsxs)(Y.a,{mt:2,display:"flex",children:[Object(ae.jsx)(Y.a,{flex:"1",children:Object(ae.jsx)(be.a,{children:Object(ae.jsxs)(ue.a,{children:[Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(Oe,{record:t}),Object(ae.jsxs)(Y.a,{ml:2,flex:"1",children:[Object(ae.jsxs)(K.a,{variant:"h5",children:[t.first_name," ",t.last_name]}),Object(ae.jsxs)(K.a,{variant:"body2",children:[t.title," at"," ",Object(ae.jsx)(le.a,{source:"company_id",reference:"companies",link:"show",children:Object(ae.jsx)(de.a,{source:"name"})})]})]}),Object(ae.jsx)(Y.a,{children:Object(ae.jsx)(le.a,{source:"company_id",reference:"companies",link:"show",children:Object(ae.jsx)(Qe,{})})})]}),Object(ae.jsx)(je.a,{target:"contact_id",reference:"contactNotes",sort:{field:"date",order:"DESC"},children:Object(ae.jsx)(vt,{showStatus:!0,reference:"contacts"})})]})})}),Object(ae.jsx)(Je,{record:t})]}):null},St=a(513),wt=a(189),Ct=a(1140),kt=a(1141),Dt=a(1142),Nt=a(1107),It=a(564),Pt=a(366),Et=a(1133),Tt=a(579),At=a(367),Lt=a(368),Wt=a(1127),zt=a(297),Ft=a(502),Bt=a(565),Mt=a(503),Rt=["record"],Ut=function(e){var t=e.record,a=Object(zt.a)(e,Rt);return t?Object(ae.jsx)(Ft.a,Object(i.a)(Object(i.a)({record:t},a),{},{style:{backgroundColor:t.color,border:0},component:"span"})):null},Ht=Object(G.a)({root:{display:"inline-block"}}),Vt=function(e){var t=e.record,a=Ht();return t?Object(ae.jsx)(Bt.a,{record:t,basePath:"/contacts",resource:"contacts",source:"tags",reference:"tags",className:a.root,children:Object(ae.jsx)(Mt.a,{linkType:!1,component:"span",children:Object(ae.jsx)(Ut,{source:"name",variant:"outlined",size:"small"})})}):null},qt=a(1100),Gt=a(1101),Jt=a(1102),Xt=a(508),Yt=a.n(Xt),Kt=a(511),Qt=a.n(Kt),Zt=a(512),$t=a.n(Zt),ea=a(282),ta=a.n(ea),aa=a(1103),na=a(1104),ca=a(1105),ra=a(1106),sa=function(){var e=Object(nt.a)().identity,t=Object(Ce.a)("tags",{page:1,perPage:10},{field:"name",order:"ASC"}),a=t.data,n=t.ids;return Object(ae.jsxs)(Y.a,{width:"15em",order:"-1",marginRight:"1em",children:[Object(ae.jsx)(qt.a,{}),Object(ae.jsxs)(Gt.a,{label:"Last seen",icon:Object(ae.jsx)(Yt.a,{}),children:[Object(ae.jsx)(Jt.a,{label:"Today",value:{last_seen_gte:Object(aa.a)().toISOString(),last_seen_lte:void 0}}),Object(ae.jsx)(Jt.a,{label:"This week",value:{last_seen_gte:Object(na.a)(new Date).toISOString(),last_seen_lte:void 0}}),Object(ae.jsx)(Jt.a,{label:"Before this week",value:{last_seen_gte:void 0,last_seen_lte:Object(na.a)(new Date).toISOString()}}),Object(ae.jsx)(Jt.a,{label:"Before this month",value:{last_seen_gte:void 0,last_seen_lte:Object(ca.a)(new Date).toISOString()}}),Object(ae.jsx)(Jt.a,{label:"Before last month",value:{last_seen_gte:void 0,last_seen_lte:Object(ra.a)(Object(ca.a)(new Date),1).toISOString()}})]}),Object(ae.jsxs)(Gt.a,{label:"Status",icon:Object(ae.jsx)(Qt.a,{}),children:[Object(ae.jsx)(Jt.a,{label:Object(ae.jsxs)(ae.Fragment,{children:["Cold ",Object(ae.jsx)(st,{status:"cold"})]}),value:{status:"cold"}}),Object(ae.jsx)(Jt.a,{label:Object(ae.jsxs)(ae.Fragment,{children:["Warm ",Object(ae.jsx)(st,{status:"warm"})]}),value:{status:"warm"}}),Object(ae.jsx)(Jt.a,{label:Object(ae.jsxs)(ae.Fragment,{children:["Hot ",Object(ae.jsx)(st,{status:"hot"})]}),value:{status:"hot"}}),Object(ae.jsx)(Jt.a,{label:Object(ae.jsxs)(ae.Fragment,{children:["In contract ",Object(ae.jsx)(st,{status:"in-contract"})]}),value:{status:"in-contract"}})]}),Object(ae.jsx)(Gt.a,{label:"Tags",icon:Object(ae.jsx)($t.a,{}),children:n&&a&&n.map((function(e){var t,n;return Object(ae.jsx)(Jt.a,{label:Object(ae.jsx)(Ie.a,{label:null===(t=a[e])||void 0===t?void 0:t.name,size:"small",style:{backgroundColor:null===(n=a[e])||void 0===n?void 0:n.color,border:0,cursor:"pointer"}}),value:{tags:[e]}},e)}))}),Object(ae.jsx)(Gt.a,{label:"Account manager",icon:Object(ae.jsx)(ta.a,{}),children:Object(ae.jsx)(Jt.a,{label:"Me",value:{sales_id:e&&e.id}})})]})},ia=function(){var e=Object(ye.a)(),t=e.data,a=e.ids,n=e.loaded,c=e.onToggleItem,r=e.selectedIds,s=Date.now();return!1===n?Object(ae.jsx)(St.a,{hasLeftAvatarOrIcon:!0,hasSecondaryText:!0}):Object(ae.jsx)(_e.a,{children:a.map((function(e){var a=t[e];return Object(ae.jsxs)(Se.a,{button:!0,component:$.a,to:"/contacts/".concat(e,"/show"),children:[Object(ae.jsx)(Pt.a,{children:Object(ae.jsx)(Et.a,{edge:"start",checked:r.includes(e),tabIndex:-1,disableRipple:!0,onClick:function(t){t.stopPropagation(),c(e)}})}),Object(ae.jsx)(Tt.a,{children:Object(ae.jsx)(Oe,{record:a})}),Object(ae.jsx)(At.a,{primary:"".concat(a.first_name," ").concat(a.last_name),secondary:Object(ae.jsxs)(ae.Fragment,{children:[a.title," at"," ",Object(ae.jsx)(le.a,{record:a,source:"company_id",reference:"companies",basePath:"/companies",link:!1,children:Object(ae.jsx)(de.a,{source:"name"})})," ",a.nb_notes&&"- ".concat(a.nb_notes," notes "),Object(ae.jsx)(Vt,{record:a})]})}),Object(ae.jsx)(Lt.a,{children:Object(ae.jsxs)(K.a,{variant:"body2",color:"textSecondary",children:["last activity"," ",Object(Wt.a)(new Date(a.last_seen),s)," ","ago ",Object(ae.jsx)(st,{status:a.status})]})})]},e)}))})},oa=Object(G.a)((function(e){return{createButton:{marginLeft:e.spacing(2)}}})),la=function(){var e=oa();return Object(ae.jsxs)(wt.a,{children:[Object(ae.jsx)(Ct.a,{fields:["last_name","first_name","last_seen"]}),Object(ae.jsx)(kt.a,{}),Object(ae.jsx)(Dt.a,{basePath:"/contacts",variant:"contained",label:"New Contact",className:e.createButton})]})},da=a(1110),ja=a(1128),ba=a(279),ua=a(1131),xa=a(1129),Oa=a(1136),ma=a(563),ha=a(1114),fa=a(224),pa=a.n(fa),ga=function(){return Object(ae.jsx)(Y.a,{width:20,component:"span"})},ya=function(){var e=Object(da.a)(),t=e.record,a=e.loaded,n=e.save;return a&&t?Object(ae.jsxs)(Y.a,{mt:2,display:"flex",children:[Object(ae.jsx)(Y.a,{flex:"1",children:Object(ae.jsx)(ja.a,{record:t,redirect:"show",save:n,render:function(e){return Object(ae.jsxs)(be.a,{children:[Object(ae.jsx)(ue.a,{children:Object(ae.jsx)(Y.a,{children:Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(Y.a,{mr:2,children:Object(ae.jsx)(Oe,{record:t})}),Object(ae.jsxs)(Y.a,{flex:"1",mt:-1,children:[Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"first_name"}),Object(ae.jsx)(ga,{}),Object(ae.jsx)(ba.a,{source:"last_name"})]}),Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"title"}),Object(ae.jsx)(ga,{}),Object(ae.jsx)(ua.a,{source:"company_id",reference:"companies",children:Object(ae.jsx)(xa.a,{optionText:"name"})})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Y.a,{mt:2,width:430,children:Object(ae.jsx)(ba.a,{source:"email",fullWidth:!0})}),Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"phone_number1"}),Object(ae.jsx)(ga,{}),Object(ae.jsx)(ba.a,{source:"phone_number2"})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsxs)(Y.a,{mt:2,width:430,children:[Object(ae.jsx)(ba.a,{source:"background",multiline:!0,fullWidth:!0}),Object(ae.jsx)(ba.a,{source:"avatar",fullWidth:!0}),Object(ae.jsx)(Oa.a,{source:"has_newsletter"})]})]})]})})}),Object(ae.jsx)(ma.a,Object(i.a)({},pa()(e,["dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","hasSubmitErrors","hasValidationErrors","initialValues","modifiedSinceLastSubmit","submitError","submitErrors","submitFailed","submitSucceeded","submitting","valid"])))]})}})}),Object(ae.jsx)(Je,{record:t,link:"show"})]}):null},va=a(1115),_a=a(1116),Sa=a(506),wa=function(){return Object(ae.jsx)(Y.a,{width:20,component:"span"})},Ca=function(){var e=Object(_a.a)(),t=e.save,a=e.record;return Object(ae.jsx)(Y.a,{mt:2,display:"flex",children:Object(ae.jsx)(Y.a,{flex:"1",children:Object(ae.jsx)(ja.a,{redirect:"show",record:a,save:t,render:function(e){return Object(ae.jsxs)(be.a,{children:[Object(ae.jsx)(ue.a,{children:Object(ae.jsx)(Y.a,{children:Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(Y.a,{mr:2,children:Object(ae.jsx)(xe.a,{})}),Object(ae.jsxs)(Y.a,{flex:"1",mt:-1,children:[Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"first_name",validate:[Object(Sa.b)()]}),Object(ae.jsx)(wa,{}),Object(ae.jsx)(ba.a,{source:"last_name",validate:[Object(Sa.b)()]})]}),Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"title"}),Object(ae.jsx)(wa,{}),Object(ae.jsx)(ua.a,{source:"company_id",reference:"companies",children:Object(ae.jsx)(xa.a,{optionText:"name"})})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Y.a,{mt:2,width:430,children:Object(ae.jsx)(ba.a,{source:"email",fullWidth:!0})}),Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(ba.a,{source:"phone_number1"}),Object(ae.jsx)(wa,{}),Object(ae.jsx)(ba.a,{source:"phone_number2"})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsxs)(Y.a,{mt:2,width:430,children:[Object(ae.jsx)(ba.a,{source:"background",multiline:!0,fullWidth:!0}),Object(ae.jsx)(ba.a,{source:"avatar",fullWidth:!0}),Object(ae.jsx)(Oa.a,{source:"has_newsletter"})]})]})]})})}),Object(ae.jsx)(ma.a,Object(i.a)({},e))]})}})})})},ka={list:function(e){var t=Object(nt.a)().identity;return t?Object(ae.jsx)(Nt.a,Object(i.a)(Object(i.a)({},e),{},{actions:Object(ae.jsx)(la,{}),aside:Object(ae.jsx)(sa,{}),perPage:25,pagination:Object(ae.jsx)(It.a,{rowsPerPageOptions:[10,25,50,100]}),filterDefaultValues:{sales_id:null===t||void 0===t?void 0:t.id},sort:{field:"last_seen",order:"DESC"},children:Object(ae.jsx)(ia,{})})):null},show:function(e){return Object(ae.jsx)(ie.a,Object(i.a)(Object(i.a)({},e),{},{children:Object(ae.jsx)(_t,{})}))},edit:function(e){return Object(ae.jsx)(ha.a,Object(i.a)(Object(i.a)({},e),{},{children:Object(ae.jsx)(ya,{})}))},create:function(e){return Object(ae.jsx)(va.a,Object(i.a)(Object(i.a)({},e),{},{transform:function(e){return Object(i.a)(Object(i.a)({},e),{},{last_seen:new Date,tags:[]})},children:Object(ae.jsx)(Ca,{})}))}},Da=a(363),Na=a(988),Ia=a(151),Pa=a(1117),Ea=["Communication Services","Consumer Discretionary","Consumer Staples","Energy","Financials","Health Care","Industrials","Information Technology","Materials","Real Estate","Utilities"].map((function(e){return{id:e,name:e}})),Ta=Object(G.a)({avatar:{width:60,height:60,backgroundColor:"aliceblue"},img:{objectFit:"contain"},small:{width:20,height:20},large:{width:40,height:40}}),Aa=function(e){var t=e.record,a=e.size,n=void 0===a?"large":a,c=Ta();return t?Object(ae.jsx)(xe.a,{src:"/react-admin-crm"+t.logo,alt:t.name,className:c.avatar,imgProps:{className:Object(ct.a)(c.img,c[n])}}):null},La=Object(G.a)((function(e){return{paper:{height:300,width:193.5,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"1em"},identity:{display:"flex",flexDirection:"column",alignItems:"center"},name:{textAlign:"center",marginTop:e.spacing(1)},stats:{display:"flex",justifyContent:"space-around",width:"100%"},singleStat:{display:"flex",alignItems:"center"},statIcon:{marginRight:e.spacing(1)}}})),Wa=function(e){var t=e.record,a=La(),c=Object(n.useState)(1),r=Object(we.a)(c,2),s=r[0],i=r[1];return Object(ae.jsx)(Na.a,{component:$.a,to:Object(Ia.a)("/companies",t.id,"show"),underline:"none",onMouseEnter:function(){return i(3)},onMouseLeave:function(){return i(1)},children:Object(ae.jsxs)(Da.a,{className:a.paper,elevation:s,children:[Object(ae.jsxs)("div",{className:a.identity,children:[Object(ae.jsx)(Aa,{record:t}),Object(ae.jsxs)("div",{className:a.name,children:[Object(ae.jsx)(K.a,{variant:"caption",children:t.name}),Object(ae.jsx)("br",{}),Object(ae.jsx)(Pa.a,{color:"textSecondary",source:"sector",choices:Ea,record:t})]})]}),Object(ae.jsxs)("div",{className:a.stats,children:[Object(ae.jsx)("div",{className:a.singleStat,children:Object(ae.jsxs)("div",{children:[Object(ae.jsx)(K.a,{variant:"caption",style:{marginBottom:-8},children:t.nb_contacts}),Object(ae.jsx)(K.a,{variant:"caption",color:"textSecondary",children:t.nb_contacts>1?" contacts":" contact"})]})}),Object(ae.jsx)("div",{className:a.singleStat,children:Object(ae.jsxs)("div",{children:[Object(ae.jsx)(K.a,{variant:"caption",style:{marginBottom:-8},children:t.nb_deals}),Object(ae.jsx)(K.a,{variant:"caption",color:"textSecondary",children:t.nb_deals>1?" deals":" deal"})]})})]})]})})},za=Object(G.a)((function(e){return{gridList:{display:"flex",flexWrap:"wrap",width:1008,gap:"10px"},paper:{height:200,width:194,display:"flex",flexDirection:"column",backgroundColor:e.palette.grey[200]}}})),Fa=function(){var e,t,a=za();return Object(ae.jsx)(Y.a,{className:a.gridList,children:(e=15,t=function(e){return Object(ae.jsx)(Da.a,{className:a.paper},e)},Array.from({length:e},(function(e,a){return t(a)})))})},Ba=function(){var e=Object(ye.a)(),t=e.ids,a=e.data,n=za();return t&&a?Object(ae.jsx)(Y.a,{className:n.gridList,children:t.map((function(e){return Object(ae.jsx)(Wa,{record:a[e]},e)}))}):null},Ma=function(){return Object(ye.a)().loaded?Object(ae.jsx)(Ba,{}):Object(ae.jsx)(Fa,{})},Ra=a(290),Ua=a.n(Ra),Ha=a(530),Va=a.n(Ha),qa=[{id:1,name:"1 employee"},{id:10,name:"2-9 employees"},{id:50,name:"10-49 employees"},{id:250,name:"50-249 employees"},{id:500,name:"250 or more employees"}],Ga=function(){var e=Object(nt.a)().identity;return Object(ae.jsxs)(Y.a,{width:"15em",order:"-1",marginRight:"1em",children:[Object(ae.jsx)(qt.a,{}),Object(ae.jsx)(Gt.a,{label:"Size",icon:Object(ae.jsx)(Ua.a,{}),children:qa.map((function(e){return Object(ae.jsx)(Jt.a,{label:e.name,value:{size:e.id}},e.id)}))}),Object(ae.jsx)(Gt.a,{label:"Sector",icon:Object(ae.jsx)(Va.a,{}),children:Ea.map((function(e){return Object(ae.jsx)(Jt.a,{label:e.name,value:{sector:e.id}},e.id)}))}),Object(ae.jsx)(Gt.a,{label:"Account manager",icon:Object(ae.jsx)(ta.a,{}),children:Object(ae.jsx)(Jt.a,{label:"Me",value:{sales_id:e&&e.id}})})]})},Ja=Object(G.a)((function(e){return{createButton:{marginLeft:e.spacing(2)}}})),Xa=function(e){var t=Ja();return Object(ae.jsxs)(wt.a,{children:[Object(ae.jsx)(kt.a,{}),Object(ae.jsx)(Dt.a,{basePath:"/companies",variant:"contained",label:"New Company",className:t.createButton})]})},Ya=a(1143),Ka=a(1134),Qa=a(1118),Za=Object(G.a)({inline:{display:"inline-block",marginLeft:"1em","&.first-child":{marginLeft:0}}}),$a=function(e){return Object(ae.jsx)(ue.a,{children:Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(Y.a,{paddingTop:1,children:Object(ae.jsx)(xe.a,{children:Object(ae.jsx)(Ua.a,{})})}),Object(ae.jsx)(Y.a,{ml:2,flex:"1",maxWidth:796,children:e.children})]})})},en=function(){return Object(ae.jsx)(Y.a,{mb:2,children:Object(ae.jsx)(ve.a,{})})},tn=a(532),an=a.n(tn),nn=function(e){var t=e.record,a=e.link,n=void 0===a?"edit":a;return t?Object(ae.jsxs)(Y.a,{ml:4,width:250,minWidth:250,children:[Object(ae.jsx)(Y.a,{textAlign:"center",mb:2,children:"edit"===n?Object(ae.jsx)(me.a,{basePath:"/companies",record:t,label:"Edit Company"}):Object(ae.jsx)(he.a,{basePath:"/companies",record:t,label:"Show Company"})}),Object(ae.jsx)(K.a,{variant:"body2",children:"Company info"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsxs)(Y.a,{mt:2,children:["Website: ",Object(ae.jsx)(Na.a,{href:t.website,children:t.website}),Object(ae.jsx)("br",{}),"LinkedIn: ",Object(ae.jsx)(Na.a,{href:t.linkedIn,children:"LinkedIn"})]}),Object(ae.jsxs)(Y.a,{mt:1,children:[Object(ae.jsx)(de.a,{source:"phone_number",record:t})," ",Object(ae.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:"Main"})]}),Object(ae.jsxs)(Y.a,{mt:1,mb:3,children:[Object(ae.jsx)(de.a,{source:"address"}),Object(ae.jsx)("br",{}),Object(ae.jsx)(de.a,{source:"city"})," ",Object(ae.jsx)(de.a,{source:"zipcode"})," ",Object(ae.jsx)(de.a,{source:"stateAbbr"})]}),Object(ae.jsx)(K.a,{variant:"body2",children:"Background"}),Object(ae.jsx)(ve.a,{}),Object(ae.jsxs)(Y.a,{mt:1,children:[Object(ae.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:"Added on"})," ",Object(ae.jsx)(pe.a,{source:"created_at",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),Object(ae.jsx)("br",{}),Object(ae.jsx)(K.a,{component:"span",variant:"body2",color:"textSecondary",children:"Followed by"})," ",Object(ae.jsx)(le.a,{resource:"companies",source:"sales_id",reference:"sales",children:Object(ae.jsx)(ge.a,{source:"last_name",render:function(e){return e?"".concat(e.first_name," ").concat(e.last_name):""}})})]})]}):null},cn=["opportunity","proposal-sent","in-negociation","won","lost","delayed"],rn={opportunity:"Opportunity","proposal-sent":"Proposed","in-negociation":"In Negoiation",won:"Won",lost:"Lost",delayed:"Delayed"},sn=cn.map((function(e){return{id:e,name:rn[e]}})),on=["children","value","index"],ln=function(){var e=Object(oe.a)(),t=e.record,a=e.loaded,c=Object(n.useState)(0),r=Object(we.a)(c,2),s=r[0],i=r[1];return a&&t?Object(ae.jsxs)(Y.a,{mt:2,display:"flex",children:[Object(ae.jsx)(Y.a,{flex:"1",children:Object(ae.jsx)(be.a,{children:Object(ae.jsxs)(ue.a,{children:[Object(ae.jsxs)(Y.a,{display:"flex",mb:1,children:[Object(ae.jsx)(Qe,{record:t}),Object(ae.jsxs)(Y.a,{ml:2,flex:"1",children:[Object(ae.jsx)(K.a,{variant:"body2",children:t.name}),Object(ae.jsxs)(K.a,{variant:"caption",children:[Object(ae.jsx)(de.a,{source:"sector"}),","," ",Object(ae.jsx)(Pa.a,{source:"size",choices:qa})]})]})]}),Object(ae.jsxs)(Q.a,{value:s,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){i(t)},children:[t.nb_contacts&&Object(ae.jsx)(Z.a,{label:1===t.nb_contacts?"1 Contact":"".concat(t.nb_contacts," Contacts")}),t.nb_deals&&Object(ae.jsx)(Z.a,{label:1===t.nb_deals?"1 deal":"".concat(t.nb_deals," Deals")})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(dn,{value:s,index:0,children:Object(ae.jsx)(je.a,{reference:"contacts",target:"company_id",sort:{field:"last_name",order:"ASC"},children:Object(ae.jsx)(jn,{})})}),Object(ae.jsx)(dn,{value:s,index:1,children:Object(ae.jsx)(je.a,{reference:"deals",target:"company_id",sort:{field:"name",order:"ASC"},children:Object(ae.jsx)(un,{})})})]})})}),Object(ae.jsx)(nn,{record:t})]}):null},dn=function(e){var t=e.children,a=e.value,n=e.index,c=Object(zt.a)(e,on);return Object(ae.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:a!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},c),{},{children:t}))},jn=function(){var e=Object(ye.a)(),t=e.data,a=e.ids,n=e.loaded,c=Object($e.b)(),r=Date.now();return n?Object(ae.jsxs)(Y.a,{children:[Object(ae.jsx)(_e.a,{children:a.map((function(e){var a=t[e];return Object(ae.jsxs)(Se.a,{button:!0,component:$.a,to:"/contacts/".concat(e,"/show"),children:[Object(ae.jsx)(Tt.a,{children:Object(ae.jsx)(Oe,{record:a})}),Object(ae.jsx)(At.a,{primary:"".concat(a.first_name," ").concat(a.last_name),secondary:Object(ae.jsxs)(ae.Fragment,{children:[a.title," ",Object(ae.jsx)(Vt,{record:a})]})}),Object(ae.jsx)(Lt.a,{children:Object(ae.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:["last activity"," ",Object(Wt.a)(new Date(a.last_seen),r)," ago"," ",Object(ae.jsx)(st,{status:a.status})]})})]},e)}))}),Object(ae.jsx)(Y.a,{textAlign:"center",mt:1,children:Object(ae.jsx)(bn,{record:c})})]}):null},bn=function(e){var t=e.record;return Object(ae.jsx)(Fe.a,{component:$.a,to:{pathname:"/contacts/create",state:{record:{company_id:t.id}}},color:"primary",variant:"contained",size:"small",startIcon:Object(ae.jsx)(an.a,{}),children:"Add contact"})},un=function(){var e=Object(ye.a)(),t=e.data,a=e.ids,n=e.loaded,c=Date.now();return n?Object(ae.jsx)(Y.a,{children:Object(ae.jsx)(_e.a,{children:a.map((function(e){var a=t[e];return Object(ae.jsxs)(Se.a,{button:!0,component:$.a,to:"/deals/".concat(e,"/show"),children:[Object(ae.jsx)(At.a,{primary:a.name,secondary:Object(ae.jsxs)(ae.Fragment,{children:[rn[a.stage],","," ",a.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3}),", ",a.type]})}),Object(ae.jsx)(Lt.a,{children:Object(ae.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"span",children:["last activity ",Object(Wt.a)(new Date(a.updated_at),c)," ","ago"," "]})})]},e)}))})}):null},xn=a(1137),On=Object(G.a)({inline:{display:"inline-block",marginLeft:"1em","&.first-child":{marginLeft:0}}}),mn=function(e){var t=Object($e.b)(e);return Object(ae.jsx)(ue.a,{children:Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsx)(Qe,{record:t}),Object(ae.jsx)(Y.a,{ml:2,flex:"1",maxWidth:796,children:e.children})]})})},hn=function(){return Object(ae.jsx)(Y.a,{mb:2,children:Object(ae.jsx)(ve.a,{})})},fn={list:function(e){var t=Object(nt.a)().identity;return t?Object(ae.jsx)(Nt.a,Object(i.a)(Object(i.a)({},e),{},{actions:Object(ae.jsx)(Xa,{}),aside:Object(ae.jsx)(Ga,{}),filterDefaultValues:{sales_id:null===t||void 0===t?void 0:t.id},pagination:Object(ae.jsx)(It.a,{rowsPerPageOptions:[15,25,50,100]}),perPage:25,sort:{field:"name",order:"ASC"},component:"div",children:Object(ae.jsx)(Ma,{})})):null},create:function(e){var t=Za();return Object(ae.jsx)(Ya.a,Object(i.a)(Object(i.a)({},e),{},{actions:!1,children:Object(ae.jsxs)(Ka.a,{component:$a,redirect:"show",children:[Object(ae.jsx)(ba.a,{source:"name",validate:Object(Sa.b)(),fullWidth:!0}),Object(ae.jsx)(Qa.a,{source:"sector",choices:Ea,formClassName:Object(ct.a)(t.inline,"first-child")}),Object(ae.jsx)(Qa.a,{source:"size",choices:qa,formClassName:t.inline}),Object(ae.jsx)(en,{}),Object(ae.jsx)(ba.a,{source:"address",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"city",formClassName:Object(ct.a)(t.inline,"first-child")}),Object(ae.jsx)(ba.a,{source:"zipcode",formClassName:t.inline}),Object(ae.jsx)(ba.a,{source:"stateAbbr",formClassName:t.inline}),Object(ae.jsx)(en,{}),Object(ae.jsx)(ba.a,{source:"website",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"linkedIn",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"logo",fullWidth:!0}),Object(ae.jsx)(en,{}),Object(ae.jsx)(ba.a,{source:"phone_number",formClassName:Object(ct.a)(t.inline,"first-child"),helperText:!1}),Object(ae.jsx)(ua.a,{source:"sales_id",reference:"sales",label:"Account manager",formClassName:t.inline,helperText:!1,children:Object(ae.jsx)(Qa.a,{optionText:function(e){return"".concat(e.first_name," ").concat(e.last_name)}})})]})}))},edit:function(e){var t=On();return Object(ae.jsx)(xn.a,Object(i.a)(Object(i.a)({},e),{},{aside:Object(ae.jsx)(nn,{link:"show"}),actions:!1,children:Object(ae.jsxs)(Ka.a,{component:mn,redirect:"show",children:[Object(ae.jsx)(ba.a,{source:"name",validate:Object(Sa.b)(),fullWidth:!0}),Object(ae.jsx)(Qa.a,{source:"sector",choices:Ea,formClassName:Object(ct.a)(t.inline,"first-child")}),Object(ae.jsx)(Qa.a,{source:"size",choices:qa,formClassName:t.inline}),Object(ae.jsx)(hn,{}),Object(ae.jsx)(ba.a,{source:"address",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"city",formClassName:Object(ct.a)(t.inline,"first-child")}),Object(ae.jsx)(ba.a,{source:"zipcode",formClassName:t.inline}),Object(ae.jsx)(ba.a,{source:"stateAbbr",formClassName:t.inline}),Object(ae.jsx)(hn,{}),Object(ae.jsx)(ba.a,{source:"website",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"linkedIn",fullWidth:!0,helperText:!1}),Object(ae.jsx)(ba.a,{source:"logo",fullWidth:!0}),Object(ae.jsx)(hn,{}),Object(ae.jsx)(ba.a,{source:"phone_number",formClassName:Object(ct.a)(t.inline,"first-child"),helperText:!1}),Object(ae.jsx)(ua.a,{source:"sales_id",reference:"sales",label:"Account manager",formClassName:t.inline,helperText:!1,children:Object(ae.jsx)(Qa.a,{optionText:function(e){return"".concat(e.first_name," ").concat(e.last_name)}})})]})}))},show:function(e){return Object(ae.jsx)(ie.a,Object(i.a)(Object(i.a)({},e),{},{children:Object(ae.jsx)(ln,{})}))}},pn=a(1120),gn=a(568),yn=a(81),vn=a.n(yn),_n=a(166),Sn=a(491),wn=a(145),Cn=a(191),kn=a(44),Dn=a.n(kn),Nn=a(982),In=Object(G.a)((function(e){return{root:{marginBottom:e.spacing(1)},cardContent:{padding:e.spacing(1),display:"flex"},cardText:{marginLeft:e.spacing(1)}}})),Pn=function(e){var t=e.deal,a=e.index,n=In(),c=Object(Nn.a)();if(!t)return null;var r=function(){c("/deals/".concat(t.id,"/show"))};return Object(ae.jsx)(Cn.b,{draggableId:String(t.id),index:a,children:function(e,a){return Object(ae.jsx)("div",Object(i.a)(Object(i.a)(Object(i.a)({className:n.root},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,onClick:r,children:Object(ae.jsx)(be.a,{style:{opacity:a.isDragging?.9:1,transform:a.isDragging?"rotate(-2deg)":""},elevation:a.isDragging?3:1,children:Object(ae.jsxs)("div",{className:n.cardContent,children:[Object(ae.jsx)(le.a,{source:"company_id",record:t,reference:"companies",resource:"deals",basePath:"/deals",children:Object(ae.jsx)(Qe,{size:"small"})}),Object(ae.jsxs)("div",{className:n.cardText,children:[Object(ae.jsx)(K.a,{variant:"caption",gutterBottom:!0,children:t.name}),Object(ae.jsx)("br",{}),Object(ae.jsxs)(K.a,{variant:"caption",color:"textSecondary",children:[t.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3}),Object(ae.jsx)("br",{}),t.type]})]})]})})}))}})},En=Object(G.a)({root:{flex:1,paddingTop:8,paddingBottom:16,backgroundColor:"#eaeaee","&:first-child":{paddingLeft:5,borderTopLeftRadius:5},"&:last-child":{paddingRight:5,borderTopRightRadius:5}},droppable:{display:"flex",flexDirection:"column",borderRadius:5,padding:5,"&.isDraggingOver":{backgroundColor:"#dadadf"}}}),Tn=function(e){var t=e.stage,a=e.dealIds,n=e.data,c=En();return Object(ae.jsxs)("div",{className:c.root,children:[Object(ae.jsx)(K.a,{align:"center",variant:"body2",children:rn[t]}),Object(ae.jsx)(Cn.c,{droppableId:t,children:function(e,t){return Object(ae.jsxs)("div",Object(i.a)(Object(i.a)({ref:e.innerRef},e.droppableProps),{},{className:c.droppable+(t.isDraggingOver?" isDraggingOver":""),children:[a.map((function(e,t){return Object(ae.jsx)(Pn,{index:t,deal:n[e]},e)})),e.placeholder]}))}})]})},An=cn.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(Ze.a)({},t,[]))}),{}),Ln=function(e,t){var a=e.reduce((function(e,a){return e[t[a].stage].push(a),e}),cn.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(Ze.a)({},t,[]))}),{}));return cn.forEach((function(e){a[e]=a[e].sort((function(e,a){return t[e].index-t[a].index}))})),a},Wn=function(){var e=Object(ye.a)(),t=e.data,a=e.ids,c=e.loaded,r=e.page,s=e.perPage,o=e.currentSort,l=e.filterValues,d=Object(n.useState)(c?Ln(a,t):An),j=Object(we.a)(d,2),b=j[0],x=j[1],O=Object(n.useContext)(Sn.a),m=Object(wn.a)({resource:"deals",type:"getList",payload:{pagination:{page:r,perPage:s},sort:o,filter:l}}),h=Object(we.a)(m,1)[0];if(Object(n.useEffect)((function(){if(c){var e=Ln(a,t);Dn()(b,e)||x(e)}}),[t,a,c]),!c)return null;var f=function(){var e=Object(_n.a)(vn.a.mark((function e(a){var n,c,r,s,o,l,d,j,m,f,p,g,y,v,_,S,w;return vn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.destination,c=a.source,r=a.draggableId,n){e.next=3;break}return e.abrupt("return");case 3:if(n.droppableId!==c.droppableId||n.index!==c.index){e.next=5;break}return e.abrupt("return");case 5:if(c.droppableId!==n.droppableId){e.next=27;break}return s=Array.from(b[c.droppableId]),o=t[s[c.index]],l=t[s[n.index]],s.splice(c.index,1),s.splice(n.index,0,Number(r)),x(Object(i.a)(Object(i.a)({},b),{},Object(Ze.a)({},c.droppableId,s))),e.next=14,O.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:c.droppableId}});case 14:if(d=e.sent,j=d.data,!(c.index>n.index)){e.next=22;break}return e.next=19,Promise.all([].concat(Object(u.a)(j.filter((function(e){return e.index>=l.index&&e.index<o.index})).map((function(e){return O.update("deals",{id:e.id,data:{index:e.index+1},previousData:e})}))),[O.update("deals",{id:o.id,data:{index:l.index},previousData:o})]));case 19:h(),e.next=25;break;case 22:return e.next=24,Promise.all([].concat(Object(u.a)(j.filter((function(e){return e.index<=l.index&&e.index>o.index})).map((function(e){return O.update("deals",{id:e.id,data:{index:e.index-1},previousData:e})}))),[O.update("deals",{id:o.id,data:{index:l.index},previousData:o})]));case 24:h();case 25:e.next=43;break;case 27:return f=Array.from(b[c.droppableId]),p=Array.from(b[n.droppableId]),g=t[f[c.index]],y=t[p[n.index]],f.splice(c.index,1),p.splice(n.index,0,r),x(Object(i.a)(Object(i.a)({},b),{},(m={},Object(Ze.a)(m,c.droppableId,f),Object(Ze.a)(m,n.droppableId,p),m))),e.next=36,Promise.all([O.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:c.droppableId}}),O.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:n.droppableId}})]);case 36:return v=e.sent,_=Object(we.a)(v,2),S=_[0].data,w=_[1].data,e.next=42,Promise.all([].concat(Object(u.a)(S.filter((function(e){return e.index>g.index})).map((function(e){return O.update("deals",{id:e.id,data:{index:e.index-1},previousData:e})}))),Object(u.a)(w.filter((function(e){return!!y&&e.index>=y.index})).map((function(e){return O.update("deals",{id:e.id,data:{index:e.index+1},previousData:e})}))),[O.update("deals",{id:g.id,data:{index:y?y.index:w.pop().index+1,stage:n.droppableId},previousData:g})]));case 42:h();case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ae.jsx)(Cn.a,{onDragEnd:f,children:Object(ae.jsx)(Y.a,{display:"flex",children:cn.map((function(e){return Object(ae.jsx)(Tn,{stage:e,dealIds:b[e],data:t},e)}))})})},zn=a(143),Fn=a(1119),Bn=["Other","Copywriting","Print project","UI Design","Website design"].map((function(e){return{id:e,name:e}})),Mn=Object(G.a)({root:{width:500}}),Rn=function(e){var t=e.open,a=Mn(),n=Object(Nn.a)(),c=Object(zn.a)();return Object(ae.jsx)(Te.a,{open:t,onClose:function(){n("/deals")},children:Object(ae.jsx)(Ya.a,{resource:"deals",basePath:"/deals",className:a.root,onSuccess:function(e){var t=e.data;n("/deals"),c.getList("deals",{pagination:{page:1,perPage:50},sort:{field:"id",order:"ASC"},filter:{stage:t.stage}}).then((function(e){var a=e.data;return Promise.all(a.filter((function(e){return e.id!==t.id})).map((function(e){return c.update("deals",{id:e.id,data:{index:e.index+1},previousData:e})})))}))},children:Object(ae.jsxs)(Ka.a,{initialValues:{index:0},children:[Object(ae.jsx)(ba.a,{source:"name",label:"Deal name",fullWidth:!0,validate:[Object(Sa.b)()]}),Object(ae.jsx)(ba.a,{source:"description",multiline:!0,rows:3,fullWidth:!0}),Object(ae.jsx)(ua.a,{source:"company_id",reference:"companies",fullWidth:!0,validate:[Object(Sa.b)()],children:Object(ae.jsx)(xa.a,{optionText:"name"})}),Object(ae.jsx)(Qa.a,{source:"stage",choices:sn,fullWidth:!0,validate:[Object(Sa.b)()],defaultValue:"opportunity"}),Object(ae.jsx)(Qa.a,{source:"type",choices:Bn,fullWidth:!0}),Object(ae.jsx)(Fn.a,{source:"amount",fullWidth:!0,defaultValue:0})]})})})},Un=a(1126),Hn=Object(G.a)({ul:{listStyle:"none",padding:0,margin:0,display:"inline-block"},li:{display:"inline","&:after":{content:'", "'},"&:last-child:after":{content:'""'}}}),Vn=function(){var e=Object(ye.a)(),t=e.ids,a=e.data,n=e.loaded,c=Hn();return n?Object(ae.jsx)("ul",{className:c.ul,children:t.map((function(e){return Object(ae.jsx)("li",{className:c.li,children:Object(ae.jsxs)(Na.a,{component:$.a,to:"/contacts/".concat(e),variant:"body2",children:[a[e].first_name," ",a[e].last_name]})},e)}))}):Object(ae.jsx)("div",{style:{height:"2em"}})},qn=Object(G.a)({dialog:{position:"absolute",top:50}}),Gn=function(e){var t=e.open,a=e.id,n=Object(Nn.a)(),c=qn();return Object(ae.jsx)(Te.a,{open:t,onClose:function(){n("/deals")},fullWidth:!0,maxWidth:"md",classes:{paper:c.dialog},children:Object(ae.jsx)(Le.a,{children:Object(ae.jsx)(ie.a,{resource:"deals",basePath:"/deals",id:a,children:Object(ae.jsx)(Jn,{})})})})},Jn=function(){var e=Object($e.b)();return e?Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(Y.a,{display:"flex",children:[Object(ae.jsxs)(Y.a,{width:100,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(ae.jsx)(le.a,{source:"company_id",reference:"companies",link:"show",children:Object(ae.jsx)(Aa,{})}),Object(ae.jsx)(le.a,{source:"company_id",reference:"companies",link:"show",children:Object(ae.jsx)(de.a,{source:"name",align:"center",component:"div"})})]}),Object(ae.jsxs)(Y.a,{ml:2,flex:"1",children:[Object(ae.jsx)(K.a,{variant:"h5",children:e.name}),Object(ae.jsxs)(Y.a,{display:"flex",mt:2,children:[Object(ae.jsxs)(Y.a,{display:"flex",mr:5,flexDirection:"column",children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Start"}),Object(ae.jsx)(K.a,{variant:"body2",children:Object(Un.a)(new Date(e.start_at),"PP")})]}),Object(ae.jsxs)(Y.a,{display:"flex",mr:5,flexDirection:"column",children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Budget"}),Object(ae.jsx)(K.a,{variant:"subtitle1",children:e.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3})})]}),Object(ae.jsxs)(Y.a,{display:"flex",mr:5,flexDirection:"column",children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Type"}),Object(ae.jsx)(K.a,{variant:"subtitle1",children:e.type})]}),Object(ae.jsxs)(Y.a,{display:"flex",mr:5,flexDirection:"column",children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Stage"}),Object(ae.jsx)(K.a,{variant:"subtitle1",children:rn[e.stage]})]})]}),Object(ae.jsx)(Y.a,{mt:2,mb:2,children:Object(ae.jsxs)(Y.a,{display:"flex",mr:5,flexDirection:"column",minHeight:48,children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Contacts"}),Object(ae.jsx)(Bt.a,{source:"contact_ids",reference:"contacts",children:Object(ae.jsx)(Vn,{})})]})}),Object(ae.jsxs)(Y.a,{mt:2,mb:2,style:{whiteSpace:"pre-line"},children:[Object(ae.jsx)(K.a,{color:"textSecondary",variant:"body2",children:"Description"}),Object(ae.jsx)(K.a,{children:e.description})]}),Object(ae.jsx)(ve.a,{}),Object(ae.jsx)(Y.a,{mt:2,children:Object(ae.jsx)(je.a,{target:"deal_id",reference:"dealNotes",sort:{field:"date",order:"DESC"},children:Object(ae.jsx)(vt,{reference:"deals"})})})]})]})}):null},Xn=a(578),Yn=a(1112),Kn=a(1113),Qn=Object(G.a)((function(e){return{root:{marginBottom:e.spacing(1),marginLeft:e.spacing(1)}}})),Zn=function(e){e.alwaysOn;var t=Object(Xn.a)(),a=t.filterValues,n=t.displayedFilters,c=t.setFilters,r=Object(nt.a)().identity,s=Qn();return Object(ae.jsx)("div",{className:s.root,children:Object(ae.jsx)(Yn.a,{control:Object(ae.jsx)(Kn.a,{checked:"undefined"!==typeof a.sales_id,onChange:function(){var e=Object(i.a)({},a);"undefined"!==typeof a.sales_id?delete e.sales_id:e.sales_id=r&&(null===r||void 0===r?void 0:r.id),c(e,n)},color:"primary",name:"checkedC"}),label:"Only companies I manage"})})};Zn.defaultProps={source:"sales_id"};var $n=[Object(ae.jsx)(pn.a,{source:"q",alwaysOn:!0}),Object(ae.jsx)(Zn,{alwaysOn:!0}),Object(ae.jsx)(Qa.a,{source:"type",choices:Bn})],ec=Object(G.a)((function(e){return{createButton:{marginLeft:e.spacing(2)}}})),tc=function(){var e=ec();return Object(ae.jsxs)(wt.a,{children:[Object(ae.jsx)(gn.a,{}),Object(ae.jsx)(kt.a,{}),Object(ae.jsx)(Dt.a,{basePath:"/deals",variant:"contained",label:"New Deal",className:e.createButton})]})},ac={list:function(e){var t=Object(nt.a)().identity;return t?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(Nt.a,Object(i.a)(Object(i.a)({},e),{},{perPage:100,sort:{field:"index",order:"ASC"},filters:$n,filterDefaultValues:{sales_id:t&&(null===t||void 0===t?void 0:t.id)},actions:Object(ae.jsx)(tc,{}),pagination:!1,component:"div",children:Object(ae.jsx)(Wn,{})})),Object(ae.jsx)(M.b,{path:"/deals/create",children:function(e){var t=e.match;return Object(ae.jsx)(Rn,{open:!!t})}}),Object(ae.jsx)(M.b,{path:"/deals/:id/show",children:function(e){var t,a=e.match;return a?Object(ae.jsx)(Gn,{open:!!a,id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id}):null}})]}):null}},nc=a(544),cc=a.n(nc),rc=a(561),sc={opportunity:.2,"proposal-sent":.5,"in-negociation":.8,delayed:.3},ic=function(){var e=Object(Ce.a)("deals",{perPage:100,page:1},{field:"start_at",order:"ASC"}),t=e.data,a=e.ids,c=e.loaded,r=Object(n.useState)([]),s=Object(we.a)(r,2),i=s[0],o=s[1];if(Object(n.useEffect)((function(){var e=a.map((function(e){return t[e]})).reduce((function(e,t){var a=Object(ca.a)(new Date(t.start_at)).toISOString();return e[a]||(e[a]=[]),e[a].push(t),e}),{}),n=Object.keys(e).map((function(t){return{date:Object(Un.a)(new Date(t),"MMM"),won:e[t].filter((function(e){return"won"===e.stage})).reduce((function(e,t){return e+=t.amount}),0),pending:e[t].filter((function(e){return!["won","lost"].includes(e.stage)})).reduce((function(e,t){return e+=t.amount*sc[t.stage]}),0),lost:e[t].filter((function(e){return"lost"===e.stage})).reduce((function(e,t){return e-=t.amount}),0)}}));o(n)}),[a,t]),!c)return null;var l=i.reduce((function(e,t){return e.min=Math.min(e.min,t.lost),e.max=Math.max(e.max,t.won+t.pending),e}),{min:0,max:0});return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(Y.a,{display:"flex",alignItems:"center",children:[Object(ae.jsx)(Y.a,{ml:2,mr:2,display:"flex",children:Object(ae.jsx)(cc.a,{color:"disabled",fontSize:"large"})}),Object(ae.jsx)(Na.a,{underline:"none",variant:"body2",color:"textSecondary",component:$.a,to:"/deals",children:"Upcoming Deal Revenue"})]}),Object(ae.jsx)(Y.a,{height:500,children:Object(ae.jsx)(rc.a,{data:i,indexBy:"date",keys:["won","pending","lost"],colors:["#61cdbb","#97e3d5","#e25c3b"],margin:{top:50,right:50,bottom:50,left:0},padding:.3,valueScale:{type:"linear",min:1.2*l.min,max:1.2*l.max},indexScale:{type:"band",round:!0},enableGridX:!0,enableGridY:!1,enableLabel:!1,axisTop:{tickSize:0,tickPadding:12},axisBottom:{legendPosition:"middle",legendOffset:50,tickSize:0,tickPadding:12},axisLeft:null,axisRight:{format:function(e){return"".concat(Math.abs(e/1e3),"k")},tickValues:8},markers:[{axis:"y",value:0,lineStyle:{strokeOpacity:0},textStyle:{fill:"#2ebca6"},legend:"Won",legendPosition:"top-left",legendOrientation:"vertical"},{axis:"y",value:0,lineStyle:{stroke:"#f47560",strokeWidth:1},textStyle:{fill:"#e25c3b"},legend:"Lost",legendPosition:"bottom-left",legendOrientation:"vertical"}]})})]})},oc=a(545),lc=a.n(oc),dc=a(1122),jc=function(){var e=Object(nt.a)().identity,t=Object(Ce.a)("contacts",{page:1,perPage:10},{field:"last_seen",order:"DESC"},{status:"hot",sales_id:null===e||void 0===e?void 0:e.id},{enabled:Number.isInteger(null===e||void 0===e?void 0:e.id)}),a=t.data,n=t.ids,c=t.total,r=t.loaded;return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(Y.a,{display:"flex",alignItems:"center",marginBottom:"1em",children:[Object(ae.jsx)(Y.a,{ml:2,mr:2,display:"flex",children:Object(ae.jsx)(lc.a,{color:"disabled",fontSize:"large"})}),Object(ae.jsx)(Na.a,{underline:"none",variant:"body2",color:"textSecondary",component:$.a,to:"/contacts",children:"Hot contacts"})]}),Object(ae.jsx)(be.a,{children:Object(ae.jsx)(dc.a,{basePath:"/contacts",linkType:"show",ids:n,data:a,total:c,loaded:r,primaryText:function(e){return"".concat(e.first_name," ").concat(e.last_name)},secondaryText:function(e){return Object(Wt.a)(new Date(e.last_seen),new Date,{addSuffix:!0})},leftAvatar:function(e){return Object(ae.jsx)(Oe,{record:e})}})})]})},bc=a(546),uc=a.n(bc),xc=Object(G.a)((function(e){return{note:{marginBottom:e.spacing(2)},noteText:{backgroundColor:"#edf3f0",padding:e.spacing(1),borderRadius:10},noteTextText:{display:"-webkit-box","-webkit-line-clamp":3,"-webkit-box-orient":"vertical",overflow:"hidden"}}})),Oc=function(){var e=xc(),t=Object(nt.a)().identity,a=Object(Ce.a)("contactNotes",{page:1,perPage:5},{field:"date",order:"DESC"},{sales_id:null===t||void 0===t?void 0:t.id},{enabled:Number.isInteger(null===t||void 0===t?void 0:t.id)}),n=a.data,c=a.ids,r=a.loaded,s=Object(Ce.a)("dealNotes",{page:1,perPage:5},{field:"date",order:"DESC"},{sales_id:null===t||void 0===t?void 0:t.id},{enabled:Number.isInteger(null===t||void 0===t?void 0:t.id)}),o=s.data,l=s.ids,d=s.loaded;if(!r||!d)return null;if(!c||!n||!l||!o)return null;var j=[].concat(c.map((function(e){return Object(i.a)(Object(i.a)({},n[e]),{},{type:"contactNote"})})),l.map((function(e){return Object(i.a)(Object(i.a)({},o[e]),{},{type:"dealNote"})}))).sort((function(e,t){return new Date(t.date).valueOf()-new Date(e.date).valueOf()})).slice(0,5);return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(Y.a,{display:"flex",alignItems:"center",marginBottom:"1em",children:[Object(ae.jsx)(Y.a,{ml:2,mr:2,display:"flex",children:Object(ae.jsx)(uc.a,{color:"disabled",fontSize:"large"})}),Object(ae.jsx)(K.a,{variant:"body2",color:"textSecondary",children:"My Latest Notes"})]}),Object(ae.jsx)(be.a,{children:Object(ae.jsx)(ue.a,{children:j.map((function(t){return Object(ae.jsxs)("div",{id:"".concat(t.type,"_").concat(t.id),className:e.note,children:[Object(ae.jsxs)(K.a,{color:"textSecondary",gutterBottom:!0,children:["dealNote"===t.type?Object(ae.jsx)(mc,{note:t}):Object(ae.jsx)(hc,{note:t}),", added"," ",Object(Wt.a)(new Date(t.date),new Date,{addSuffix:!0})]}),Object(ae.jsx)("div",{className:e.noteText,children:Object(ae.jsx)(K.a,{className:e.noteTextText,children:t.text})})]},"".concat(t.type,"_").concat(t.id))}))})})]})},mc=function(e){var t=e.note;return Object(ae.jsxs)(ae.Fragment,{children:["Deal"," ",Object(ae.jsx)(le.a,{record:t,source:"deal_id",reference:"deals",basePath:"/deals",link:"show",children:Object(ae.jsx)(de.a,{source:"name",variant:"body1"})})]})},hc=function(e){var t=e.note;return Object(ae.jsxs)(ae.Fragment,{children:["Contact"," ",Object(ae.jsx)(le.a,{record:t,source:"contact_id",reference:"contacts",basePath:"/contacts",link:"show",children:Object(ae.jsx)(ge.a,{variant:"body1",render:function(e){return e?"".concat(e.first_name," ").concat(e.last_name):""}})})]})},fc=a(547),pc=a.n(fc),gc=function(){var e=Object(nt.a)().identity,t=Object(Ce.a)("deals",{page:1,perPage:10},{field:"last_seen",order:"DESC"},{stage_neq:"lost",sales_id:null===e||void 0===e?void 0:e.id},{enabled:Number.isInteger(null===e||void 0===e?void 0:e.id)}),a=t.data,c=t.ids,r=t.total,s=t.loaded,i=Object(n.useState)(c),o=Object(we.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){var e=c.map((function(e){return a[e]})),t=[];cn.filter((function(e){return"won"!==e})).forEach((function(a){return e.filter((function(e){return e.stage===a})).forEach((function(e){return t.push(e.id)}))})),d(t)}),[c,a]),Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(Y.a,{display:"flex",alignItems:"center",marginBottom:"1em",children:[Object(ae.jsx)(Y.a,{ml:2,mr:2,display:"flex",children:Object(ae.jsx)(pc.a,{color:"disabled",fontSize:"large"})}),Object(ae.jsx)(Na.a,{underline:"none",variant:"body2",color:"textSecondary",component:$.a,to:"/deals",children:"Deals Pipeline"})]}),Object(ae.jsx)(be.a,{children:Object(ae.jsx)(dc.a,{basePath:"/deals",linkType:"show",ids:l,data:a,total:r,loaded:s,primaryText:function(e){return e.name},secondaryText:function(e){return"".concat(e.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3})," , ").concat(rn[e.stage])},leftAvatar:function(e){return Object(ae.jsx)(le.a,{source:"company_id",record:e,reference:"companies",resource:"deals",basePath:"/deals",link:!1,children:Object(ae.jsx)(Aa,{size:"small"})})}})})]})},yc=function(){return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(Y.a,{display:"flex",mt:"2em",children:Object(ae.jsx)(Y.a,{flex:"3",mr:"1em",children:Object(ae.jsx)(ic,{})})}),Object(ae.jsxs)(Y.a,{display:"flex",mt:"2em",children:[Object(ae.jsx)(Y.a,{flex:"1",mr:"1em",children:Object(ae.jsx)(Oc,{})}),Object(ae.jsxs)(Y.a,{flex:"1",display:"flex",children:[Object(ae.jsx)(Y.a,{flex:"1",mr:"1em",children:Object(ae.jsx)(jc,{})}),Object(ae.jsx)(Y.a,{flex:"1",children:Object(ae.jsx)(gc,{})})]})]})]})},vc=Object(j.a)({typography:{button:{textTransform:"none"}}}),_c=function(){return Object(ae.jsxs)(o.a,{dataProvider:A,authProvider:L,layout:se,dashboard:yc,theme:vc,children:[Object(ae.jsx)(l.a,Object(i.a)({name:"deals"},ac)),Object(ae.jsx)(l.a,Object(i.a)({name:"contacts"},ka)),Object(ae.jsx)(l.a,Object(i.a)({name:"companies"},fn)),Object(ae.jsx)(l.a,{name:"contactNotes"}),Object(ae.jsx)(l.a,{name:"dealNotes"}),Object(ae.jsx)(l.a,{name:"tasks",list:d.a}),Object(ae.jsx)(l.a,{name:"sales",list:d.a}),Object(ae.jsx)(l.a,{name:"tags",list:d.a})]})};s.a.render(Object(ae.jsx)(c.a.StrictMode,{children:Object(ae.jsx)(_c,{})}),document.getElementById("root"))}},[[974,1,2]]]);
//# sourceMappingURL=main.548af5e3.chunk.js.map